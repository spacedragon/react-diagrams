/*! For license information please see main.124b334272f5e0e56732.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),styled_1=__webpack_require__(18);var S;!function(S){S.Container=styled_1.default.div`
		height: 100%;
		background-color: ${p=>p.background};
		background-size: 50px 50px;
		display: flex;

		> * {
			height: 100%;
			min-height: 100%;
			width: 100%;
		}
		background-image: linear-gradient(
				0deg,
				transparent 24%,
				${p=>p.color} 25%,
				${p=>p.color} 26%,
				transparent 27%,
				transparent 74%,
				${p=>p.color} 75%,
				${p=>p.color} 76%,
				transparent 77%,
				transparent
			),
			linear-gradient(
				90deg,
				transparent 24%,
				${p=>p.color} 25%,
				${p=>p.color} 26%,
				transparent 27%,
				transparent 74%,
				${p=>p.color} 75%,
				${p=>p.color} 76%,
				transparent 77%,
				transparent
			);
	`}(S||(S={}));class DemoCanvasWidget extends React.Component{render(){return React.createElement(S.Container,{background:this.props.background||"rgb(60, 60, 60)",color:this.props.color||"rgba(255,255,255, 0.05)"},this.props.children)}}exports.DemoCanvasWidget=DemoCanvasWidget},125:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const Toolkit_1=__webpack_require__(166);exports.BaseObserver=class BaseObserver{constructor(){this.listeners={}}fireEventInternal(fire,k,event){this.iterateListeners(listener=>{if(!fire&&!event.firing)return!1;listener[k]&&listener[k](event)})}fireEvent(event,k){event=Object.assign({firing:!0,stopPropagation:()=>{event.firing=!1}},event),this.fireEventInternal(!0,"eventWillFire",Object.assign(Object.assign({},event),{function:k})),this.fireEventInternal(!1,k,event),this.fireEventInternal(!0,"eventDidFire",Object.assign(Object.assign({},event),{function:k}))}iterateListeners(cb){for(let id in this.listeners){if(!1===cb(this.listeners[id]))return}}getListenerHandle(listener){for(let id in this.listeners)if(this.listeners[id]===listener)return{id:id,listner:listener,deregister:()=>{delete this.listeners[id]}}}registerListener(listener){const id=Toolkit_1.Toolkit.UID();return this.listeners[id]=listener,{id:id,listner:listener,deregister:()=>{delete this.listeners[id]}}}deregisterListener(listener){if("object"==typeof listener)return listener.deregister(),!0;const handle=this.getListenerHandle(listener);return!!handle&&(handle.deregister(),!0)}}},166:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const closest=__webpack_require__(777);class Toolkit{static UID(){return Toolkit.TESTING?(Toolkit.TESTING_UID++,""+Toolkit.TESTING_UID):"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,c=>{const r=16*Math.random()|0;return("x"===c?r:3&r|8).toString(16)})}static closest(element,selector){return document.body.closest?element.closest(selector):closest(element,selector)}}exports.Toolkit=Toolkit,Toolkit.TESTING=!1,Toolkit.TESTING_UID=0},167:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const mathjs=__webpack_require__(974);class Point{constructor(x,y){this.x=x,this.y=y}translate(x,y){this.x+=x,this.y+=y}clone(){return new Point(this.x,this.y)}toSVG(){return this.x+" "+this.y}asMatrix(){return mathjs.matrix([[this.x],[this.y],[1]])}transform(matrix){let final=mathjs.multiply(matrix,this.asMatrix());this.x=final.get([0,0]),this.y=final.get([1,0])}static middlePoint(pointA,pointB){return new Point((pointB.x+pointA.x)/2,(pointB.y+pointA.y)/2)}static multiply(...matrices){let m=matrices[0];for(let i=1;i<matrices.length;i++)m=mathjs.multiply(m,matrices[i]);return m}static scaleMatrix(x,y){return mathjs.matrix([[x,0,0],[0,y,0],[0,0,1]])}static translateMatrix(x,y){return mathjs.matrix([[1,0,x],[0,1,y],[0,0,1]])}static rotateMatrix(deg){return mathjs.matrix([[Math.cos(deg),-1*Math.sin(deg),0],[Math.sin(deg),Math.cos(deg),0],[0,0,1]])}static createScaleMatrix(x,y,origin){return this.multiply(Point.translateMatrix(origin.x,origin.y),Point.scaleMatrix(x,y),Point.translateMatrix(-origin.x,-origin.y))}static createRotateMatrix(deg,origin){return this.multiply(Point.translateMatrix(origin.x,origin.y),Point.rotateMatrix(deg),Point.translateMatrix(-origin.x,-origin.y))}}exports.Point=Point},168:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const State_1=__webpack_require__(169),Action_1=__webpack_require__(67);class AbstractDisplacementState extends State_1.State{constructor(options){super(options),this.registerAction(new Action_1.Action({type:Action_1.InputType.MOUSE_DOWN,fire:actionEvent=>{this.initialX=actionEvent.event.clientX,this.initialY=actionEvent.event.clientY;const rel=this.engine.getRelativePoint(actionEvent.event.clientX,actionEvent.event.clientY);this.initialXRelative=rel.x,this.initialYRelative=rel.y}})),this.registerAction(new Action_1.Action({type:Action_1.InputType.MOUSE_MOVE,fire:actionEvent=>{const{event:event}=actionEvent;this.fireMouseMoved({displacementX:event.clientX-this.initialX,displacementY:event.clientY-this.initialY,virtualDisplacementX:(event.clientX-this.initialX)/(this.engine.getModel().getZoomLevel()/100),virtualDisplacementY:(event.clientY-this.initialY)/(this.engine.getModel().getZoomLevel()/100),event:event})}})),this.registerAction(new Action_1.Action({type:Action_1.InputType.MOUSE_UP,fire:event=>{this.eject()}}))}}exports.AbstractDisplacementState=AbstractDisplacementState},169:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const Action_1=__webpack_require__(67),_=__webpack_require__(5);exports.State=class State{constructor(options){this.actions=[],this.keys=[],this.childStates=[],this.options=options}setEngine(engine){this.engine=engine}getOptions(){return this.options}eject(){this.engine.getStateMachine().popState()}transitionWithEvent(state,event){this.engine.getStateMachine().pushState(state),this.engine.getActionEventBus().fireAction(event)}registerAction(action){this.actions.push(action)}tryActivateParentState(keys){return this.keys.length>0&&!this.isKeysFullfilled(keys)&&(this.eject(),!0)}tryActivateChildState(keys){const state=this.findStateToActivate(keys);return!!state&&(this.engine.getStateMachine().pushState(state),!0)}findStateToActivate(keys){for(let child of this.childStates)if(child.isKeysFullfilled(keys))return child;return null}isKeysFullfilled(keys){return _.intersection(this.keys,keys).length===this.keys.length}activated(previous){const keys=this.engine.getActionEventBus().getKeys();if(!this.tryActivateParentState(keys)&&!this.tryActivateChildState(keys)){this.handler1=this.engine.getActionEventBus().registerAction(new Action_1.Action({type:Action_1.InputType.KEY_DOWN,fire:()=>{this.tryActivateChildState(this.engine.getActionEventBus().getKeys())}})),this.handler2=this.engine.getActionEventBus().registerAction(new Action_1.Action({type:Action_1.InputType.KEY_UP,fire:()=>{this.tryActivateParentState(this.engine.getActionEventBus().getKeys())}}));for(let action of this.actions)this.engine.getActionEventBus().registerAction(action)}}deactivated(next){this.handler1&&this.handler1(),this.handler2&&this.handler2();for(let action of this.actions)this.engine.getActionEventBus().deregisterAction(action)}}},170:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const _=__webpack_require__(5),geometry_1=__webpack_require__(55),react_canvas_core_1=__webpack_require__(3);class NodeModel extends react_canvas_core_1.BasePositionModel{constructor(options){super(options),this.ports={},this.width=0,this.height=0}getBoundingBox(){return new geometry_1.Rectangle(this.getPosition(),this.width,this.height)}setPosition(x,y){let old=this.position;super.setPosition(x,y),_.forEach(this.ports,port=>{port.setPosition(port.getX()+x-old.x,port.getY()+y-old.y)})}deserialize(event){super.deserialize(event),_.forEach(event.data.ports,port=>{let portOb=event.engine.getFactoryForPort(port.type).generateModel({});portOb.deserialize(Object.assign(Object.assign({},event),{data:port})),event.registerModel(portOb),this.addPort(portOb)})}serialize(){return Object.assign(Object.assign({},super.serialize()),{ports:_.map(this.ports,port=>port.serialize())})}doClone(lookupTable={},clone){clone.ports={},_.forEach(this.ports,port=>{clone.addPort(port.clone(lookupTable))})}remove(){super.remove(),_.forEach(this.ports,port=>{_.forEach(port.getLinks(),link=>{link.remove()})})}getPortFromID(id){for(var i in this.ports)if(this.ports[i].getID()===id)return this.ports[i];return null}getLink(id){for(let portID in this.ports){const links=this.ports[portID].getLinks();if(links[id])return links[id]}}getPort(name){return this.ports[name]}getPorts(){return this.ports}removePort(port){for(let link of _.values(port.getLinks()))link.clearPort(port);this.ports[port.getName()]&&(this.ports[port.getName()].setParent(null),delete this.ports[port.getName()])}addPort(port){return port.setParent(this),this.ports[port.getName()]=port,port}updateDimensions({width:width,height:height}){this.width=width,this.height=height}}exports.NodeModel=NodeModel},171:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const _=__webpack_require__(5),geometry_1=__webpack_require__(55),react_canvas_core_1=__webpack_require__(3);!function(PortModelAlignment){PortModelAlignment.TOP="top",PortModelAlignment.LEFT="left",PortModelAlignment.BOTTOM="bottom",PortModelAlignment.RIGHT="right"}(exports.PortModelAlignment||(exports.PortModelAlignment={}));class PortModel extends react_canvas_core_1.BasePositionModel{constructor(options){super(options),this.links={},this.reportedPosition=!1}deserialize(event){super.deserialize(event),this.reportedPosition=!1,this.options.name=event.data.name,this.options.alignment=event.data.alignment}serialize(){return Object.assign(Object.assign({},super.serialize()),{name:this.options.name,alignment:this.options.alignment,parentNode:this.parent.getID(),links:_.map(this.links,link=>link.getID())})}setPosition(x,y){let old=this.position;super.setPosition(x,y),_.forEach(this.getLinks(),link=>{let point=link.getPointForPort(this);point.setPosition(point.getX()+x-old.x,point.getY()+y-old.y)})}doClone(lookupTable={},clone){clone.links={},clone.parentNode=this.getParent().clone(lookupTable)}getNode(){return this.getParent()}getName(){return this.options.name}getMaximumLinks(){return this.options.maximumLinks}setMaximumLinks(maximumLinks){this.options.maximumLinks=maximumLinks}removeLink(link){delete this.links[link.getID()]}addLink(link){this.links[link.getID()]=link}getLinks(){return this.links}createLinkModel(){if(_.isFinite(this.options.maximumLinks)){var numberOfLinks=_.size(this.links);if(1===this.options.maximumLinks&&numberOfLinks>=1)return _.values(this.links)[0];if(numberOfLinks>=this.options.maximumLinks)return null}return null}reportPosition(){_.forEach(this.getLinks(),link=>{link.getPointForPort(this).setPosition(this.getCenter())}),this.fireEvent({entity:this},"reportInitialPosition")}getCenter(){return new geometry_1.Point(this.getX()+this.width/2,this.getY()+this.height/2)}updateCoords(coords){this.width=coords.getWidth(),this.height=coords.getHeight(),this.setPosition(coords.getTopLeft()),this.reportedPosition=!0,this.reportPosition()}canLinkToPort(port){return!0}isLocked(){return super.isLocked()||this.getParent().isLocked()}}exports.PortModel=PortModel},241:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const Point_1=__webpack_require__(167),_=__webpack_require__(5);class Polygon{constructor(points=[]){this.points=points}serialize(){return _.map(this.points,point=>[point.x,point.y])}deserialize(data){this.points=_.map(data,point=>new Point_1.Point(point[0],point[1]))}scale(x,y,origin){let matrix=Point_1.Point.createScaleMatrix(x,y,origin);_.forEach(this.points,point=>{point.transform(matrix)})}transform(matrix){_.forEach(this.points,point=>{point.transform(matrix)})}setPoints(points){this.points=points}getPoints(){return this.points}rotate(degrees){this.transform(Point_1.Point.createRotateMatrix(degrees/(180/Math.PI),this.getOrigin()))}translate(offsetX,offsetY){_.forEach(this.points,point=>{point.translate(offsetX,offsetY)})}doClone(ob){this.points=_.map(ob.points,point=>point.clone())}clone(){let ob=Object.create(this);return ob.doClone(this),ob}getOrigin(){if(0===this.points.length)return null;let dimensions=this.getBoundingBox();return Point_1.Point.middlePoint(dimensions.getTopLeft(),dimensions.getBottomRight())}static boundingBoxFromPolygons(polygons){return Polygon.boundingBoxFromPoints(_.flatMap(polygons,polygon=>polygon.getPoints()))}static boundingBoxFromPoints(points){if(0===points.length)return new Rectangle_1.Rectangle(0,0,0,0);let minX=points[0].x,maxX=points[0].x,minY=points[0].y,maxY=points[0].y;for(let i=1;i<points.length;i++)points[i].x<minX&&(minX=points[i].x),points[i].x>maxX&&(maxX=points[i].x),points[i].y<minY&&(minY=points[i].y),points[i].y>maxY&&(maxY=points[i].y);return new Rectangle_1.Rectangle(new Point_1.Point(minX,minY),new Point_1.Point(maxX,minY),new Point_1.Point(maxX,maxY),new Point_1.Point(minX,maxY))}getBoundingBox(){let minX=this.points[0].x,maxX=this.points[0].x,minY=this.points[0].y,maxY=this.points[0].y;for(let i=1;i<this.points.length;i++)this.points[i].x<minX&&(minX=this.points[i].x),this.points[i].x>maxX&&(maxX=this.points[i].x),this.points[i].y<minY&&(minY=this.points[i].y),this.points[i].y>maxY&&(maxY=this.points[i].y);return new Rectangle_1.Rectangle(new Point_1.Point(minX,minY),new Point_1.Point(maxX,minY),new Point_1.Point(maxX,maxY),new Point_1.Point(minX,maxY))}}exports.Polygon=Polygon;const Rectangle_1=__webpack_require__(382)},242:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const _=__webpack_require__(5),BaseEntity_1=__webpack_require__(243);class CanvasModel extends BaseEntity_1.BaseEntity{constructor(options={}){super(Object.assign({zoom:100,gridSize:0,offsetX:0,offsetY:0},options)),this.layers=[]}getSelectionEntities(){return _.flatMap(this.layers,layer=>layer.getSelectionEntities())}getSelectedEntities(){return _.filter(this.getSelectionEntities(),ob=>ob.isSelected())}clearSelection(){_.forEach(this.getSelectedEntities(),element=>{element.setSelected(!1)})}getModels(){return _.flatMap(this.layers,layer=>_.values(layer.getModels()))}addLayer(layer){layer.setParent(this),layer.registerListener({entityRemoved:event=>{}}),this.layers.push(layer)}removeLayer(layer){const index=this.layers.indexOf(layer);return-1!==index&&(this.layers.splice(index,1),!0)}getLayers(){return this.layers}setGridSize(size=0){this.options.gridSize=size,this.fireEvent({size:size},"gridUpdated")}getGridPosition(pos){return 0===this.options.gridSize?pos:this.options.gridSize*Math.floor((pos+this.options.gridSize/2)/this.options.gridSize)}deserializeModel(data,engine){const models={},promises={},resolvers={},event={data:data,engine:engine,registerModel:model=>{models[model.getID()]=model,resolvers[model.getID()]&&resolvers[model.getID()](model)},getModel:id=>models[id]?Promise.resolve(models[id]):(promises[id]||(promises[id]=new Promise(resolve=>{resolvers[id]=resolve})),promises[id])};this.deserialize(event)}deserialize(event){super.deserialize(event),this.options.offsetX=event.data.offsetX,this.options.offsetY=event.data.offsetY,this.options.zoom=event.data.zoom,this.options.gridSize=event.data.gridSize,_.forEach(event.data.layers,layer=>{const layerOb=event.engine.getFactoryForLayer(layer.type).generateModel({initialConfig:layer});layerOb.deserialize(Object.assign(Object.assign({},event),{data:layer})),this.addLayer(layerOb)})}serialize(){return Object.assign(Object.assign({},super.serialize()),{offsetX:this.options.offsetX,offsetY:this.options.offsetY,zoom:this.options.zoom,gridSize:this.options.gridSize,layers:_.map(this.layers,layer=>layer.serialize())})}setZoomLevel(zoom){this.options.zoom=zoom,this.fireEvent({zoom:zoom},"zoomUpdated")}setOffset(offsetX,offsetY){this.options.offsetX=offsetX,this.options.offsetY=offsetY,this.fireEvent({offsetX:offsetX,offsetY:offsetY},"offsetUpdated")}setOffsetX(offsetX){this.setOffset(offsetX,this.options.offsetY)}setOffsetY(offsetY){this.setOffset(this.options.offsetX,offsetY)}getOffsetY(){return this.options.offsetY}getOffsetX(){return this.options.offsetX}getZoomLevel(){return this.options.zoom}}exports.CanvasModel=CanvasModel},243:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const Toolkit_1=__webpack_require__(166),_=__webpack_require__(5),BaseObserver_1=__webpack_require__(125);class BaseEntity extends BaseObserver_1.BaseObserver{constructor(options={}){super(),this.options=Object.assign({id:Toolkit_1.Toolkit.UID()},options)}getOptions(){return this.options}getID(){return this.options.id}doClone(lookupTable={},clone){}clone(lookupTable={}){if(lookupTable[this.options.id])return lookupTable[this.options.id];let clone=_.cloneDeep(this);return clone.options=Object.assign(Object.assign({},this.options),{id:Toolkit_1.Toolkit.UID()}),clone.clearListeners(),lookupTable[this.options.id]=clone,this.doClone(lookupTable,clone),clone}clearListeners(){this.listeners={}}deserialize(event){this.options.id=event.data.id,this.options.locked=event.data.locked}serialize(){return{id:this.options.id,locked:this.options.locked}}fireEvent(event,k){super.fireEvent(Object.assign({entity:this},event),k)}isLocked(){return this.options.locked}setLocked(locked=!0){this.options.locked=locked,this.fireEvent({locked:locked},"lockChanged")}}exports.BaseEntity=BaseEntity},244:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const BaseEntity_1=__webpack_require__(243),CanvasModel_1=__webpack_require__(242);class BaseModel extends BaseEntity_1.BaseEntity{constructor(options){super(options)}performanceTune(){return!0}getParentCanvasModel(){return this.parent?this.parent instanceof CanvasModel_1.CanvasModel?this.parent:this.parent instanceof BaseModel?this.parent.getParentCanvasModel():null:null}getParent(){return this.parent}setParent(parent){this.parent=parent}getSelectionEntities(){return[this]}serialize(){return Object.assign(Object.assign({},super.serialize()),{type:this.options.type,selected:this.options.selected,extras:this.options.extras})}deserialize(event){super.deserialize(event),this.options.extras=event.data.extras,this.options.selected=event.data.selected}getType(){return this.options.type}isSelected(){return this.options.selected}isLocked(){return!!super.isLocked()||!!this.parent&&this.parent.isLocked()}setSelected(selected=!0){this.options.selected!==selected&&(this.options.selected=selected,this.fireEvent({isSelected:selected},"selectionChanged"))}remove(){this.fireEvent({},"entityRemoved")}}exports.BaseModel=BaseModel},245:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const LayerModel_1=__webpack_require__(393);class SelectionLayerModel extends LayerModel_1.LayerModel{constructor(){super({transformed:!1,isSvg:!1,type:"selection"})}setBox(rect){this.box=rect}getChildModelFactoryBank(){return null}}exports.SelectionLayerModel=SelectionLayerModel},246:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const PointModel_1=__webpack_require__(247),_=__webpack_require__(5),geometry_1=__webpack_require__(55),react_canvas_core_1=__webpack_require__(3);class LinkModel extends react_canvas_core_1.BaseModel{constructor(options){super(options),this.points=[new PointModel_1.PointModel({link:this}),new PointModel_1.PointModel({link:this})],this.sourcePort=null,this.targetPort=null,this.renderedPaths=[],this.labels=[]}getBoundingBox(){return geometry_1.Polygon.boundingBoxFromPoints(_.map(this.points,point=>point.getPosition()))}getSelectionEntities(){return this.getTargetPort()&&this.getSourcePort()?super.getSelectionEntities().concat(_.slice(this.points,1,this.points.length-1)):this.getSourcePort()?this.getTargetPort()?super.getSelectionEntities().concat(this.points):super.getSelectionEntities().concat(_.slice(this.points,1,this.points.length)):super.getSelectionEntities().concat(_.slice(this.points,0,this.points.length-1))}deserialize(event){super.deserialize(event),this.points=_.map(event.data.points||[],point=>{var p=new PointModel_1.PointModel({link:this,position:new geometry_1.Point(point.x,point.y)});return p.deserialize(Object.assign(Object.assign({},event),{data:point})),p}),_.forEach(event.data.labels||[],label=>{let labelOb=event.engine.getFactoryForLabel(label.type).generateModel({});labelOb.deserialize(Object.assign(Object.assign({},event),{data:label})),this.addLabel(labelOb)}),event.data.target&&event.getModel(event.data.targetPort).then(model=>{this.setTargetPort(model)}),event.data.source&&event.getModel(event.data.sourcePort).then(model=>{this.setSourcePort(model)})}getRenderedPath(){return this.renderedPaths}setRenderedPaths(paths){this.renderedPaths=paths}serialize(){return Object.assign(Object.assign({},super.serialize()),{source:this.sourcePort?this.sourcePort.getParent().getID():null,sourcePort:this.sourcePort?this.sourcePort.getID():null,target:this.targetPort?this.targetPort.getParent().getID():null,targetPort:this.targetPort?this.targetPort.getID():null,points:_.map(this.points,point=>point.serialize()),labels:_.map(this.labels,label=>label.serialize())})}doClone(lookupTable={},clone){clone.setPoints(_.map(this.getPoints(),point=>point.clone(lookupTable))),this.sourcePort&&clone.setSourcePort(this.sourcePort.clone(lookupTable)),this.targetPort&&clone.setTargetPort(this.targetPort.clone(lookupTable))}clearPort(port){this.sourcePort===port?this.setSourcePort(null):this.targetPort===port&&this.setTargetPort(null)}remove(){this.sourcePort&&this.sourcePort.removeLink(this),this.targetPort&&this.targetPort.removeLink(this),super.remove()}isLastPoint(point){return this.getPointIndex(point)===this.points.length-1}getPointIndex(point){return this.points.indexOf(point)}getPointModel(id){for(var i=0;i<this.points.length;i++)if(this.points[i].getID()===id)return this.points[i];return null}getPortForPoint(point){return null!==this.sourcePort&&this.getFirstPoint().getID()===point.getID()?this.sourcePort:null!==this.targetPort&&this.getLastPoint().getID()===point.getID()?this.targetPort:null}getPointForPort(port){return null!==this.sourcePort&&this.sourcePort.getID()===port.getID()?this.getFirstPoint():null!==this.targetPort&&this.targetPort.getID()===port.getID()?this.getLastPoint():null}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}setSourcePort(port){null!==port&&port.addLink(this),null!==this.sourcePort&&this.sourcePort.removeLink(this),this.sourcePort=port,this.fireEvent({port:port},"sourcePortChanged")}getSourcePort(){return this.sourcePort}getTargetPort(){return this.targetPort}setTargetPort(port){null!==port&&port.addLink(this),null!==this.targetPort&&this.targetPort.removeLink(this),this.targetPort=port,this.fireEvent({port:port},"targetPortChanged")}point(x,y,index=1){return this.addPoint(this.generatePoint(x,y),index)}addLabel(label){label.setParent(this),this.labels.push(label)}getPoints(){return this.points}getLabels(){return this.labels}setPoints(points){_.forEach(points,point=>{point.setParent(this)}),this.points=points}removePoint(pointModel){this.points.splice(this.getPointIndex(pointModel),1)}removePointsBefore(pointModel){this.points.splice(0,this.getPointIndex(pointModel))}removePointsAfter(pointModel){this.points.splice(this.getPointIndex(pointModel)+1)}removeMiddlePoints(){this.points.length>2&&this.points.splice(0,this.points.length-2)}addPoint(pointModel,index=1){return pointModel.setParent(this),this.points.splice(index,0,pointModel),pointModel}generatePoint(x=0,y=0){return new PointModel_1.PointModel({link:this,position:new geometry_1.Point(x,y)})}}exports.LinkModel=LinkModel},247:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_canvas_core_1=__webpack_require__(3);class PointModel extends react_canvas_core_1.BasePositionModel{constructor(options){super(Object.assign(Object.assign({},options),{type:"point"})),this.parent=options.link}isConnectedToPort(){return null!==this.parent.getPortForPoint(this)}getLink(){return this.getParent()}remove(){this.parent&&this.parent.removePoint(this),super.remove()}isLocked(){return super.isLocked()||this.getParent().isLocked()}}exports.PointModel=PointModel},248:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_canvas_core_1=__webpack_require__(3),NodeModel_1=__webpack_require__(170);class NodeLayerModel extends react_canvas_core_1.LayerModel{constructor(){super({type:"diagram-nodes",isSvg:!1,transformed:!0})}addModel(model){if(!(model instanceof NodeModel_1.NodeModel))throw new Error("Can only add nodes to this layer");model.registerListener({entityRemoved:()=>{this.getParent().removeNode(model)}}),super.addModel(model)}getChildModelFactoryBank(engine){return engine.getNodeFactories()}getNodes(){return this.getModels()}}exports.NodeLayerModel=NodeLayerModel},249:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_canvas_core_1=__webpack_require__(3),LinkModel_1=__webpack_require__(246);class LinkLayerModel extends react_canvas_core_1.LayerModel{constructor(){super({type:"diagram-links",isSvg:!0,transformed:!0})}addModel(model){if(!(model instanceof LinkModel_1.LinkModel))throw new Error("Can only add links to this layer");model.registerListener({entityRemoved:()=>{this.getParent().removeLink(model)}}),super.addModel(model)}getLinks(){return this.getModels()}getChildModelFactoryBank(engine){return engine.getLinkFactories()}}exports.LinkLayerModel=LinkLayerModel},250:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_core_1=__webpack_require__(32);class DefaultLabelModel extends react_diagrams_core_1.LabelModel{constructor(options={}){super(Object.assign({offsetY:null==options.offsetY?-23:options.offsetY,type:"default"},options))}setLabel(label){this.options.label=label}deserialize(event){super.deserialize(event),this.options.label=event.data.label}serialize(){return Object.assign(Object.assign({},super.serialize()),{label:this.options.label})}}exports.DefaultLabelModel=DefaultLabelModel},251:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_core_1=__webpack_require__(32),DefaultLabelModel_1=__webpack_require__(250),geometry_1=__webpack_require__(55);class DefaultLinkModel extends react_diagrams_core_1.LinkModel{constructor(options={}){super(Object.assign({type:"default",width:options.width||3,color:options.color||"gray",selectedColor:options.selectedColor||"rgb(0,192,255)",curvyness:50},options))}calculateControlOffset(port){return port.getOptions().alignment===react_diagrams_core_1.PortModelAlignment.RIGHT?[this.options.curvyness,0]:port.getOptions().alignment===react_diagrams_core_1.PortModelAlignment.LEFT?[-this.options.curvyness,0]:port.getOptions().alignment===react_diagrams_core_1.PortModelAlignment.TOP?[0,-this.options.curvyness]:[0,this.options.curvyness]}getSVGPath(){if(2==this.points.length){const curve=new geometry_1.BezierCurve;return curve.setSource(this.getFirstPoint().getPosition()),curve.setTarget(this.getLastPoint().getPosition()),curve.setSourceControl(this.getFirstPoint().getPosition().clone()),curve.setTargetControl(this.getLastPoint().getPosition().clone()),this.sourcePort&&curve.getSourceControl().translate(...this.calculateControlOffset(this.getSourcePort())),this.targetPort&&curve.getTargetControl().translate(...this.calculateControlOffset(this.getTargetPort())),curve.getSVGCurve()}}serialize(){return Object.assign(Object.assign({},super.serialize()),{width:this.options.width,color:this.options.color,curvyness:this.options.curvyness,selectedColor:this.options.selectedColor})}deserialize(event){super.deserialize(event),this.options.color=event.data.color,this.options.width=event.data.width,this.options.curvyness=event.data.curvyness,this.options.selectedColor=event.data.selectedColor}addLabel(label){if(label instanceof react_diagrams_core_1.LabelModel)return super.addLabel(label);let labelOb=new DefaultLabelModel_1.DefaultLabelModel;return labelOb.setLabel(label),super.addLabel(labelOb)}setWidth(width){this.options.width=width,this.fireEvent({width:width},"widthChanged")}setColor(color){this.options.color=color,this.fireEvent({color:color},"colorChanged")}}exports.DefaultLinkModel=DefaultLinkModel},252:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_core_1=__webpack_require__(32),DefaultLinkModel_1=__webpack_require__(251);class DefaultPortModel extends react_diagrams_core_1.PortModel{constructor(options,name,label){name&&(options={in:!!options,name:name,label:label}),options=options,super(Object.assign({label:options.label||options.name,alignment:options.in?react_diagrams_core_1.PortModelAlignment.LEFT:react_diagrams_core_1.PortModelAlignment.RIGHT,type:"default"},options))}deserialize(event){super.deserialize(event),this.options.in=event.data.in,this.options.label=event.data.label}serialize(){return Object.assign(Object.assign({},super.serialize()),{in:this.options.in,label:this.options.label})}link(port,factory){let link=this.createLinkModel(factory);return link.setSourcePort(this),link.setTargetPort(port),link}canLinkToPort(port){return!(port instanceof DefaultPortModel)||this.options.in!==port.getOptions().in}createLinkModel(factory){let link=super.createLinkModel();return!link&&factory?factory.generateModel({}):link||new DefaultLinkModel_1.DefaultLinkModel}}exports.DefaultPortModel=DefaultPortModel},3:function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(776)),__export(__webpack_require__(166)),__export(__webpack_require__(242)),__export(__webpack_require__(387)),__export(__webpack_require__(388)),__export(__webpack_require__(389)),__export(__webpack_require__(125)),__export(__webpack_require__(381)),__export(__webpack_require__(67)),__export(__webpack_require__(383)),__export(__webpack_require__(243)),__export(__webpack_require__(244)),__export(__webpack_require__(390)),__export(__webpack_require__(242)),__export(__webpack_require__(780)),__export(__webpack_require__(393)),__export(__webpack_require__(391)),__export(__webpack_require__(392)),__export(__webpack_require__(781)),__export(__webpack_require__(394)),__export(__webpack_require__(245)),__export(__webpack_require__(782)),__export(__webpack_require__(168)),__export(__webpack_require__(169)),__export(__webpack_require__(386)),__export(__webpack_require__(783)),__export(__webpack_require__(395)),__export(__webpack_require__(396)),__export(__webpack_require__(397)),__export(__webpack_require__(398)),__export(__webpack_require__(385)),__export(__webpack_require__(384))},32:function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(785)),__export(__webpack_require__(786)),__export(__webpack_require__(246)),__export(__webpack_require__(247)),__export(__webpack_require__(399)),__export(__webpack_require__(249)),__export(__webpack_require__(400)),__export(__webpack_require__(788)),__export(__webpack_require__(248)),__export(__webpack_require__(401)),__export(__webpack_require__(790)),__export(__webpack_require__(170)),__export(__webpack_require__(402)),__export(__webpack_require__(171)),__export(__webpack_require__(791)),__export(__webpack_require__(792)),__export(__webpack_require__(404)),__export(__webpack_require__(403)),__export(__webpack_require__(793))},381:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const BaseObserver_1=__webpack_require__(125),_=__webpack_require__(5);class FactoryBank extends BaseObserver_1.BaseObserver{constructor(){super(),this.factories={}}getFactories(){return _.values(this.factories)}clearFactories(){for(let factory in this.factories)this.deregisterFactory(factory)}getFactory(type){if(!this.factories[type])throw new Error(`Cannot find factory with type [${type}]`);return this.factories[type]}registerFactory(factory){factory.setFactoryBank(this),this.factories[factory.getType()]=factory,this.fireEvent({factory:factory},"factoryAdded")}deregisterFactory(type){const factory=this.factories[type];factory.setFactoryBank(null),delete this.factories[type],this.fireEvent({factory:factory},"factoryRemoved")}}exports.FactoryBank=FactoryBank},382:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const Point_1=__webpack_require__(167),Polygon_1=__webpack_require__(241);class Rectangle extends Polygon_1.Polygon{constructor(a=0,b=0,c=0,d=0){a instanceof Point_1.Point&&b instanceof Point_1.Point&&c instanceof Point_1.Point&&d instanceof Point_1.Point?super([a,b,c,d]):a instanceof Point_1.Point?super([a,new Point_1.Point(a.x+b,a.y),new Point_1.Point(a.x+b,a.y+c),new Point_1.Point(a.x,a.y+c)]):super(Rectangle.pointsFromBounds(a,b,c,d))}static pointsFromBounds(x,y,width,height){return[new Point_1.Point(x,y),new Point_1.Point(x+width,y),new Point_1.Point(x+width,y+height),new Point_1.Point(x,y+height)]}updateDimensions(x,y,width,height){this.points=Rectangle.pointsFromBounds(x,y,width,height)}setPoints(points){if(4!==points.length)throw"Rectangles must always have 4 points";super.setPoints(points)}containsPoint(point){const tl=this.getTopLeft(),br=this.getBottomRight();return point.x>=tl.x&&point.x<=br.x&&point.y>=tl.y&&point.y<=br.y}getWidth(){return Math.sqrt(Math.pow(this.getTopLeft().x-this.getTopRight().x,2)+Math.pow(this.getTopLeft().y-this.getTopRight().y,2))}getHeight(){return Math.sqrt(Math.pow(this.getBottomLeft().x-this.getTopLeft().x,2)+Math.pow(this.getBottomLeft().y-this.getTopLeft().y,2))}getTopMiddle(){return Point_1.Point.middlePoint(this.getTopLeft(),this.getTopRight())}getBottomMiddle(){return Point_1.Point.middlePoint(this.getBottomLeft(),this.getBottomRight())}getLeftMiddle(){return Point_1.Point.middlePoint(this.getBottomLeft(),this.getTopLeft())}getRightMiddle(){return Point_1.Point.middlePoint(this.getBottomRight(),this.getTopRight())}getTopLeft(){return this.points[0]}getTopRight(){return this.points[1]}getBottomRight(){return this.points[2]}getBottomLeft(){return this.points[3]}}exports.Rectangle=Rectangle},383:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const Action_1=__webpack_require__(67),_=__webpack_require__(5);exports.ActionEventBus=class ActionEventBus{constructor(engine){this.actions={},this.engine=engine,this.keys={}}getKeys(){return _.keys(this.keys)}registerAction(action){return action.setEngine(this.engine),this.actions[action.id]=action,()=>{this.deregisterAction(action)}}deregisterAction(action){action.setEngine(null),delete this.actions[action.id]}getActionsForType(type){return _.filter(this.actions,action=>action.options.type===type)}getModelForEvent(actionEvent){return actionEvent.model?actionEvent.model:this.engine.getMouseElement(actionEvent.event)}getActionsForEvent(actionEvent){const{event:event}=actionEvent;return"mousedown"===event.type?this.getActionsForType(Action_1.InputType.MOUSE_DOWN):"mouseup"===event.type?this.getActionsForType(Action_1.InputType.MOUSE_UP):"keydown"===event.type?(this.keys[event.key.toLowerCase()]=!0,this.getActionsForType(Action_1.InputType.KEY_DOWN)):"keyup"===event.type?(delete this.keys[event.key.toLowerCase()],this.getActionsForType(Action_1.InputType.KEY_UP)):"mousemove"===event.type?this.getActionsForType(Action_1.InputType.MOUSE_MOVE):"wheel"===event.type?this.getActionsForType(Action_1.InputType.MOUSE_WHEEL):[]}fireAction(actionEvent){const actions=this.getActionsForEvent(actionEvent);for(let action of actions)action.options.fire(actionEvent)}}},384:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const Action_1=__webpack_require__(67);class ZoomCanvasAction extends Action_1.Action{constructor(options={}){super({type:Action_1.InputType.MOUSE_WHEEL,fire:actionEvent=>{const{event:event}=actionEvent;for(let layer of this.engine.getModel().getLayers())layer.allowRepaint(!1);const model=this.engine.getModel();event.stopPropagation();const oldZoomFactor=this.engine.getModel().getZoomLevel()/100;let scrollDelta=options.inverseZoom?-event.deltaY:event.deltaY;event.ctrlKey&&scrollDelta%1!=0?scrollDelta/=3:scrollDelta/=60,model.getZoomLevel()+scrollDelta>10&&model.setZoomLevel(model.getZoomLevel()+scrollDelta);const zoomFactor=model.getZoomLevel()/100,boundingRect=event.currentTarget.getBoundingClientRect(),clientWidth=boundingRect.width,clientHeight=boundingRect.height,widthDiff=clientWidth*zoomFactor-clientWidth*oldZoomFactor,heightDiff=clientHeight*zoomFactor-clientHeight*oldZoomFactor,clientX=event.clientX-boundingRect.left,clientY=event.clientY-boundingRect.top,xFactor=(clientX-model.getOffsetX())/oldZoomFactor/clientWidth,yFactor=(clientY-model.getOffsetY())/oldZoomFactor/clientHeight;model.setOffset(model.getOffsetX()-widthDiff*xFactor,model.getOffsetY()-heightDiff*yFactor),this.engine.repaintCanvas();for(let layer of this.engine.getModel().getLayers())layer.allowRepaint(!0)}})}}exports.ZoomCanvasAction=ZoomCanvasAction},385:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const Action_1=__webpack_require__(67),_=__webpack_require__(5);class DeleteItemsAction extends Action_1.Action{constructor(options={}){const keyCodes=options.keyCodes||[46,8],modifiers=Object.assign({ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1},options.modifiers);super({type:Action_1.InputType.KEY_DOWN,fire:event=>{const{keyCode:keyCode,ctrlKey:ctrlKey,shiftKey:shiftKey,altKey:altKey,metaKey:metaKey}=event.event;-1!==keyCodes.indexOf(keyCode)&&_.isEqual({ctrlKey:ctrlKey,shiftKey:shiftKey,altKey:altKey,metaKey:metaKey},modifiers)&&(_.forEach(this.engine.getModel().getSelectedEntities(),model=>{model.isLocked()||model.remove()}),this.engine.repaintCanvas())}})}}exports.DeleteItemsAction=DeleteItemsAction},386:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const _=__webpack_require__(5),BaseObserver_1=__webpack_require__(125);class StateMachine extends BaseObserver_1.BaseObserver{constructor(engine){super(),this.engine=engine,this.stateStack=[]}getCurrentState(){return this.currentState}pushState(state){this.stateStack.push(state),this.setState(state)}popState(){this.stateStack.pop(),this.setState(_.last(this.stateStack))}setState(state){state.setEngine(this.engine),this.currentState&&this.currentState.deactivated(state);const old=this.currentState;this.currentState=state,this.currentState&&(this.currentState.activated(old),this.fireEvent({newState:state},"stateChanged"))}}exports.StateMachine=StateMachine},387:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.AbstractFactory=class AbstractFactory{constructor(type){this.type=type}setDiagramEngine(engine){this.engine=engine}setFactoryBank(bank){this.bank=bank}getType(){return this.type}}},388:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const AbstractFactory_1=__webpack_require__(387);class AbstractModelFactory extends AbstractFactory_1.AbstractFactory{}exports.AbstractModelFactory=AbstractModelFactory},389:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const AbstractModelFactory_1=__webpack_require__(388);class AbstractReactFactory extends AbstractModelFactory_1.AbstractModelFactory{}exports.AbstractReactFactory=AbstractReactFactory},390:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const BaseModel_1=__webpack_require__(244),geometry_1=__webpack_require__(55);class BasePositionModel extends BaseModel_1.BaseModel{constructor(options){super(options),this.position=options.position||new geometry_1.Point(0,0)}setPosition(x,y){this.position="object"==typeof x?x:new geometry_1.Point(x,y),this.fireEvent({},"positionChanged")}getBoundingBox(){return new geometry_1.Rectangle(this.position,0,0)}deserialize(event){super.deserialize(event),this.position=new geometry_1.Point(event.data.x,event.data.y)}serialize(){return Object.assign(Object.assign({},super.serialize()),{x:this.position.x,y:this.position.y})}getPosition(){return this.position}getX(){return this.position.x}getY(){return this.position.y}}exports.BasePositionModel=BasePositionModel},391:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),styled_1=__webpack_require__(18),core_1=__webpack_require__(40);var S;!function(S){const shared=core_1.css`
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		position: absolute;
		pointer-events: none;
		transform-origin: 0 0;
		width: 100%;
		height: 100%;
		overflow: visible;
	`;S.DivLayer=styled_1.default.div`
		${shared}
	`,S.SvgLayer=styled_1.default.svg`
		${shared}
	`}(S||(S={}));class TransformLayerWidget extends React.Component{constructor(props){super(props),this.state={}}getTransform(){const model=this.props.layer.getParent();return`\n\t\t\ttranslate(\n\t\t\t\t${model.getOffsetX()}px,\n\t\t\t\t${model.getOffsetY()}px)\n\t\t\tscale(\n\t\t\t\t${model.getZoomLevel()/100}\n\t\t\t)\n  \t`}getTransformStyle(){return this.props.layer.getOptions().transformed?{transform:this.getTransform()}:{}}render(){return this.props.layer.getOptions().isSvg?React.createElement(S.SvgLayer,{style:this.getTransformStyle()},this.props.children):React.createElement(S.DivLayer,{style:this.getTransformStyle()},this.props.children)}}exports.TransformLayerWidget=TransformLayerWidget},392:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0);class SmartLayerWidget extends React.Component{shouldComponentUpdate(){return this.props.layer.isRepaintEnabled()}render(){return this.props.engine.getFactoryForLayer(this.props.layer).generateReactWidget({model:this.props.layer})}}exports.SmartLayerWidget=SmartLayerWidget},393:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const BaseModel_1=__webpack_require__(244),_=__webpack_require__(5);class LayerModel extends BaseModel_1.BaseModel{constructor(options={}){super(options),this.models={},this.repaintEnabled=!0}deserialize(event){super.deserialize(event),this.options.isSvg=!!event.data.isSvg,this.options.transformed=!!event.data.transformed,_.forEach(event.data.models,model=>{const modelOb=this.getChildModelFactoryBank(event.engine).getFactory(model.type).generateModel({initialConfig:model});modelOb.deserialize(Object.assign(Object.assign({},event),{data:model})),this.addModel(modelOb)})}serialize(){return Object.assign(Object.assign({},super.serialize()),{isSvg:this.options.isSvg,transformed:this.options.transformed,models:_.mapValues(this.models,model=>model.serialize())})}isRepaintEnabled(){return this.repaintEnabled}allowRepaint(allow=!0){this.repaintEnabled=allow}remove(){this.parent&&this.parent.removeLayer(this),super.remove()}addModel(model){model.setParent(this),this.models[model.getID()]=model}getSelectionEntities(){return _.flatMap(this.models,model=>model.getSelectionEntities())}getModels(){return this.models}getModel(id){return this.models[id]}removeModel(id){const _id="string"==typeof id?id:id.getID();return!!this.models[_id]&&(delete this.models[_id],!0)}}exports.LayerModel=LayerModel},394:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),styled_1=__webpack_require__(18);var S;!function(S){S.Container=styled_1.default.div`
		position: absolute;
		background-color: rgba(0, 192, 255, 0.2);
		border: solid 2px rgb(0, 192, 255);
	`}(S||(S={}));class SelectionBoxWidget extends React.Component{render(){const{rect:rect}=this.props;return React.createElement(S.Container,{style:{top:rect.top,left:rect.left,width:rect.width,height:rect.height}})}}exports.SelectionBoxWidget=SelectionBoxWidget},395:function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0});const AbstractDisplacementState_1=__webpack_require__(168);class DragCanvasState extends AbstractDisplacementState_1.AbstractDisplacementState{constructor(){super({name:"drag-canvas"})}activated(prev){const _super=Object.create(null,{activated:{get:()=>super.activated}});return __awaiter(this,void 0,void 0,(function*(){_super.activated.call(this,prev),this.engine.getModel().clearSelection(),yield this.engine.repaintCanvas(!0);for(let layer of this.engine.getModel().getLayers())layer.allowRepaint(!1);this.initialCanvasX=this.engine.getModel().getOffsetX(),this.initialCanvasY=this.engine.getModel().getOffsetY()}))}deactivated(next){super.deactivated(next);for(let layer of this.engine.getModel().getLayers())layer.allowRepaint(!0)}fireMouseMoved(event){this.engine.getModel().setOffset(this.initialCanvasX+event.displacementX,this.initialCanvasY+event.displacementY),this.engine.repaintCanvas()}}exports.DragCanvasState=DragCanvasState},396:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const State_1=__webpack_require__(169),Action_1=__webpack_require__(67),SelectionBoxState_1=__webpack_require__(397);class SelectingState extends State_1.State{constructor(){super({name:"selecting"}),this.keys=["shift"],this.registerAction(new Action_1.Action({type:Action_1.InputType.MOUSE_DOWN,fire:event=>{const element=this.engine.getActionEventBus().getModelForEvent(event);element?(element.setSelected(!0),this.engine.repaintCanvas()):this.transitionWithEvent(new SelectionBoxState_1.SelectionBoxState,event)}}))}}exports.SelectingState=SelectingState},397:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const AbstractDisplacementState_1=__webpack_require__(168),SelectionLayerModel_1=__webpack_require__(245),geometry_1=__webpack_require__(55);class SelectionBoxState extends AbstractDisplacementState_1.AbstractDisplacementState{constructor(){super({name:"selection-box"})}activated(previous){super.activated(previous),this.layer=new SelectionLayerModel_1.SelectionLayerModel,this.engine.getModel().addLayer(this.layer)}deactivated(next){super.deactivated(next),this.layer.remove(),this.engine.repaintCanvas()}getBoxDimensions(event){const rel=this.engine.getRelativePoint(event.event.clientX,event.event.clientY);return{left:rel.x>this.initialXRelative?this.initialXRelative:rel.x,top:rel.y>this.initialYRelative?this.initialYRelative:rel.y,width:Math.abs(rel.x-this.initialXRelative),height:Math.abs(rel.y-this.initialYRelative),right:rel.x<this.initialXRelative?this.initialXRelative:rel.x,bottom:rel.y<this.initialYRelative?this.initialYRelative:rel.y}}fireMouseMoved(event){this.layer.setBox(this.getBoxDimensions(event));const relative=this.engine.getRelativeMousePoint({clientX:this.initialX,clientY:this.initialY});event.virtualDisplacementX<0&&(relative.x-=Math.abs(event.virtualDisplacementX)),event.virtualDisplacementY<0&&(relative.y-=Math.abs(event.virtualDisplacementY));const rect=new geometry_1.Rectangle(relative,Math.abs(event.virtualDisplacementX),Math.abs(event.virtualDisplacementY));for(let model of this.engine.getModel().getSelectionEntities())if(model.getBoundingBox){const bounds=model.getBoundingBox();rect.containsPoint(bounds.getTopLeft())&&rect.containsPoint(bounds.getBottomRight())?model.setSelected(!0):model.setSelected(!1)}this.engine.repaintCanvas()}}exports.SelectionBoxState=SelectionBoxState},398:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const AbstractDisplacementState_1=__webpack_require__(168),Action_1=__webpack_require__(67),BasePositionModel_1=__webpack_require__(390);class MoveItemsState extends AbstractDisplacementState_1.AbstractDisplacementState{constructor(){super({name:"move-items"}),this.registerAction(new Action_1.Action({type:Action_1.InputType.MOUSE_DOWN,fire:event=>{const element=this.engine.getActionEventBus().getModelForEvent(event);element.isSelected()||this.engine.getModel().clearSelection(),element.setSelected(!0),this.engine.repaintCanvas()}}))}activated(previous){super.activated(previous),this.initialPositions={}}fireMouseMoved(event){const items=this.engine.getModel().getSelectedEntities(),model=this.engine.getModel();for(let item of items)if(item instanceof BasePositionModel_1.BasePositionModel){if(item.isLocked())continue;this.initialPositions[item.getID()]||(this.initialPositions[item.getID()]={point:item.getPosition(),item:item});const pos=this.initialPositions[item.getID()].point;item.setPosition(model.getGridPosition(pos.x+event.virtualDisplacementX),model.getGridPosition(pos.y+event.virtualDisplacementY))}this.engine.repaintCanvas()}}exports.MoveItemsState=MoveItemsState},399:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),_=__webpack_require__(5),LabelWidget_1=__webpack_require__(787),react_canvas_core_1=__webpack_require__(3);class LinkWidget extends React.Component{constructor(props){super(props),this.state={sourcePort:null,targetPort:null}}componentWillUnmount(){this.sourceListener&&this.sourceListener.deregister(),this.targetListener&&this.targetListener.deregister()}static getDerivedStateFromProps(nextProps,prevState){return{sourcePort:nextProps.link.getSourcePort(),targetPort:nextProps.link.getTargetPort()}}installTarget(){this.targetListener&&this.targetListener.deregister(),this.props.link.getTargetPort()&&(this.targetListener=this.props.link.getTargetPort().registerListener({reportInitialPosition:event=>{this.forceUpdate()}}))}installSource(){this.sourceListener&&this.sourceListener.deregister(),this.props.link.getSourcePort()&&(this.sourceListener=this.props.link.getSourcePort().registerListener({reportInitialPosition:event=>{this.forceUpdate()}}))}componentDidUpdate(prevProps,prevState,snapshot){prevState.sourcePort!==this.state.sourcePort&&this.installSource(),prevState.targetPort!==this.state.targetPort&&this.installTarget()}static generateLinePath(firstPoint,lastPoint){return`M${firstPoint.getX()},${firstPoint.getY()} L ${lastPoint.getX()},${lastPoint.getY()}`}componentDidMount(){this.props.link.getSourcePort()&&this.installSource(),this.props.link.getTargetPort()&&this.installTarget()}render(){const{link:link}=this.props;return link.getSourcePort()&&!link.getSourcePort().reportedPosition||link.getTargetPort()&&!link.getTargetPort().reportedPosition?null:React.createElement(react_canvas_core_1.PeformanceWidget,{model:this.props.link,serialized:this.props.link.serialize()},()=>React.createElement("g",{"data-linkid":this.props.link.getID()},this.props.diagramEngine.generateWidgetForLink(link),_.map(this.props.link.getLabels(),(labelModel,index)=>React.createElement(LabelWidget_1.LabelWidget,{key:labelModel.getID(),engine:this.props.diagramEngine,label:labelModel,index:index}))))}}exports.LinkWidget=LinkWidget},400:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),styled_1=__webpack_require__(18),_=__webpack_require__(5),LinkWidget_1=__webpack_require__(399);var S;!function(S){S.Container=styled_1.default.div``}(S||(S={}));class LinkLayerWidget extends React.Component{render(){return React.createElement(React.Fragment,null,_.map(this.props.layer.getLinks(),link=>React.createElement(LinkWidget_1.LinkWidget,{key:link.getID(),link:link,diagramEngine:this.props.engine})))}}exports.LinkLayerWidget=LinkLayerWidget},401:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),styled_1=__webpack_require__(18),_=__webpack_require__(5),NodeWidget_1=__webpack_require__(402);var S;!function(S){S.Container=styled_1.default.div``}(S||(S={}));class NodeLayerWidget extends React.Component{render(){return React.createElement(React.Fragment,null,_.map(this.props.layer.getNodes(),node=>React.createElement(NodeWidget_1.NodeWidget,{key:node.getID(),diagramEngine:this.props.engine,node:node})))}}exports.NodeLayerWidget=NodeLayerWidget},402:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),_=__webpack_require__(5),react_canvas_core_1=__webpack_require__(3),styled_1=__webpack_require__(18),resize_observer_polyfill_1=__webpack_require__(789);var S;!function(S){S.Node=styled_1.default.div`
		position: absolute;
		-webkit-touch-callout: none; /* iOS Safari */
		-webkit-user-select: none; /* Chrome/Safari/Opera */
		user-select: none;
		cursor: move;
		pointer-events: all;
	`}(S||(S={}));class NodeWidget extends React.Component{constructor(props){super(props),this.ref=React.createRef()}componentWillUnmount(){this.ob.disconnect(),this.ob=null,this.listener.deregister(),this.listener=null}componentDidUpdate(prevProps,prevState,snapshot){this.listener&&this.props.node!==prevProps.node&&(this.listener.deregister(),this.installSelectionListener())}installSelectionListener(){this.listener=this.props.node.registerListener({selectionChanged:event=>{this.forceUpdate()}})}componentDidMount(){this.ob=new resize_observer_polyfill_1.default(entities=>{const bounds=entities[0].contentRect;this.props.node.updateDimensions({width:bounds.width,height:bounds.height}),_.forEach(this.props.node.getPorts(),port=>{port.updateCoords(this.props.diagramEngine.getPortCoords(port))})}),this.ob.observe(this.ref.current),this.installSelectionListener()}render(){return React.createElement(react_canvas_core_1.PeformanceWidget,{model:this.props.node,serialized:this.props.node.serialize()},()=>React.createElement(S.Node,{className:"node",ref:this.ref,"data-nodeid":this.props.node.getID(),style:{top:this.props.node.getY(),left:this.props.node.getX()}},this.props.diagramEngine.generateWidgetForNode(this.props.node)))}}exports.NodeWidget=NodeWidget},403:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_canvas_core_1=__webpack_require__(3),PortModel_1=__webpack_require__(171);class DragNewLinkState extends react_canvas_core_1.AbstractDisplacementState{constructor(options={}){super({name:"drag-new-link"}),this.config=Object.assign({allowLooseLinks:!0,allowLinksFromLockedPorts:!1},options),this.registerAction(new react_canvas_core_1.Action({type:react_canvas_core_1.InputType.MOUSE_DOWN,fire:event=>{this.port=this.engine.getMouseElement(event.event),this.config.allowLinksFromLockedPorts||!this.port.isLocked()?(this.link=this.port.createLinkModel(),this.link?(this.link.setSelected(!0),this.link.setSourcePort(this.port),this.engine.getModel().addLink(this.link),this.port.reportPosition()):this.eject()):this.eject()}})),this.registerAction(new react_canvas_core_1.Action({type:react_canvas_core_1.InputType.MOUSE_UP,fire:event=>{const model=this.engine.getMouseElement(event.event);if(model instanceof PortModel_1.PortModel&&this.port.canLinkToPort(model))return this.link.setTargetPort(model),model.reportPosition(),void this.engine.repaintCanvas();!this.isNearbySourcePort(event.event)&&this.config.allowLooseLinks||(this.link.remove(),this.engine.repaintCanvas())}}))}isNearbySourcePort({clientX:clientX,clientY:clientY}){const sourcePort=this.link.getSourcePort(),sourcePortPosition=this.link.getSourcePort().getPosition();return clientX>=sourcePortPosition.x&&clientX<=sourcePortPosition.x+sourcePort.width&&clientY>=sourcePortPosition.y&&clientY<=sourcePortPosition.y+sourcePort.height}fireMouseMoved(event){const portPos=this.port.getPosition(),zoomLevelPercentage=this.engine.getModel().getZoomLevel()/100,engineOffsetX=this.engine.getModel().getOffsetX()/zoomLevelPercentage,engineOffsetY=this.engine.getModel().getOffsetY()/zoomLevelPercentage,initialXRelative=this.initialXRelative/zoomLevelPercentage,initialYRelative=this.initialYRelative/zoomLevelPercentage,linkNextX=portPos.x-engineOffsetX+(initialXRelative-portPos.x)+event.virtualDisplacementX,linkNextY=portPos.y-engineOffsetY+(initialYRelative-portPos.y)+event.virtualDisplacementY;this.link.getLastPoint().setPosition(linkNextX,linkNextY),this.engine.repaintCanvas()}}exports.DragNewLinkState=DragNewLinkState},404:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_canvas_core_1=__webpack_require__(3),_=__webpack_require__(5),PointModel_1=__webpack_require__(247),PortModel_1=__webpack_require__(171);class DragDiagramItemsState extends react_canvas_core_1.MoveItemsState{constructor(){super(),this.registerAction(new react_canvas_core_1.Action({type:react_canvas_core_1.InputType.MOUSE_UP,fire:event=>{const item=this.engine.getMouseElement(event.event);item instanceof PortModel_1.PortModel&&_.forEach(this.initialPositions,position=>{if(position.item instanceof PointModel_1.PointModel){const link=position.item.getParent();if(link.getLastPoint()!==position.item)return;link.getSourcePort().canLinkToPort(item)&&(link.setTargetPort(item),item.reportPosition(),this.engine.repaintCanvas())}})}}))}}exports.DragDiagramItemsState=DragDiagramItemsState},405:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),styled_1=__webpack_require__(18);var S;!function(S){S.Label=styled_1.default.div`
		background: rgba(0, 0, 0, 0.8);
		border-radius: 5px;
		color: white;
		font-size: 12px;
		padding: 4px 8px;
		font-family: sans-serif;
		user-select: none;
	`}(S||(S={}));class DefaultLabelWidget extends React.Component{render(){return React.createElement(S.Label,null,this.props.model.getOptions().label)}}exports.DefaultLabelWidget=DefaultLabelWidget},406:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),react_diagrams_core_1=__webpack_require__(32),DefaultLinkPointWidget_1=__webpack_require__(407),DefaultLinkSegmentWidget_1=__webpack_require__(408);class DefaultLinkWidget extends React.Component{constructor(props){super(props),this.refPaths=[],this.state={selected:!1}}componentDidUpdate(){this.props.link.setRenderedPaths(this.refPaths.map(ref=>ref.current))}componentDidMount(){this.props.link.setRenderedPaths(this.refPaths.map(ref=>ref.current))}componentWillUnmount(){this.props.link.setRenderedPaths([])}addPointToLink(event,index){if(!event.shiftKey&&!this.props.link.isLocked()&&this.props.link.getPoints().length-1<=this.props.diagramEngine.getMaxNumberPointsPerLink()){const point=new react_diagrams_core_1.PointModel({link:this.props.link,position:this.props.diagramEngine.getRelativeMousePoint(event)});this.props.link.addPoint(point,index),event.persist(),event.stopPropagation(),this.forceUpdate(()=>{this.props.diagramEngine.getActionEventBus().fireAction({event:event,model:point})})}}generatePoint(point){return React.createElement(DefaultLinkPointWidget_1.DefaultLinkPointWidget,{key:point.getID(),point:point,colorSelected:this.props.link.getOptions().selectedColor,color:this.props.link.getOptions().color})}generateLink(path,extraProps,id){const ref=React.createRef();return this.refPaths.push(ref),React.createElement(DefaultLinkSegmentWidget_1.DefaultLinkSegmentWidget,{key:"link-"+id,path:path,selected:this.state.selected,diagramEngine:this.props.diagramEngine,factory:this.props.diagramEngine.getFactoryForLink(this.props.link),link:this.props.link,forwardRef:ref,onSelection:selected=>{this.setState({selected:selected})},extras:extraProps})}render(){var points=this.props.link.getPoints(),paths=[];if(this.refPaths=[],2===points.length)paths.push(this.generateLink(this.props.link.getSVGPath(),{onMouseDown:event=>{this.addPointToLink(event,1)}},"0")),null==this.props.link.getTargetPort()&&paths.push(this.generatePoint(points[1]));else{for(let j=0;j<points.length-1;j++)paths.push(this.generateLink(react_diagrams_core_1.LinkWidget.generateLinePath(points[j],points[j+1]),{"data-linkid":this.props.link.getID(),"data-point":j,onMouseDown:event=>{this.addPointToLink(event,j+1)}},j));for(let i=1;i<points.length-1;i++)paths.push(this.generatePoint(points[i]));null==this.props.link.getTargetPort()&&paths.push(this.generatePoint(points[points.length-1]))}return React.createElement("g",{"data-default-link-test":this.props.link.getOptions().testName},paths)}}exports.DefaultLinkWidget=DefaultLinkWidget},407:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),styled_1=__webpack_require__(18);var S;!function(S){S.PointTop=styled_1.default.circle`
		pointer-events: all;
	`}(S||(S={}));class DefaultLinkPointWidget extends React.Component{constructor(props){super(props),this.state={selected:!1}}render(){const{point:point}=this.props;return React.createElement("g",null,React.createElement("circle",{cx:point.getPosition().x,cy:point.getPosition().y,r:5,fill:this.state.selected||this.props.point.isSelected()?this.props.colorSelected:this.props.color}),React.createElement(S.PointTop,{className:"point",onMouseLeave:()=>{this.setState({selected:!1})},onMouseEnter:()=>{this.setState({selected:!0})},"data-id":point.getID(),"data-linkid":point.getLink().getID(),cx:point.getPosition().x,cy:point.getPosition().y,r:15,opacity:0}))}}exports.DefaultLinkPointWidget=DefaultLinkPointWidget},408:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0);class DefaultLinkSegmentWidget extends React.Component{render(){const Bottom=React.cloneElement(this.props.factory.generateLinkSegment(this.props.link,this.props.selected||this.props.link.isSelected(),this.props.path),{ref:this.props.forwardRef}),Top=React.cloneElement(Bottom,Object.assign(Object.assign({strokeLinecap:"round",onMouseLeave:()=>{this.props.onSelection(!1)},onMouseEnter:()=>{this.props.onSelection(!0)}},this.props.extras),{ref:null,"data-linkid":this.props.link.getID(),strokeOpacity:this.props.selected?.1:0,strokeWidth:20,fill:"none",onContextMenu:()=>{this.props.link.isLocked()||(event.preventDefault(),this.props.link.remove())}}));return React.createElement("g",null,Bottom,Top)}}exports.DefaultLinkSegmentWidget=DefaultLinkSegmentWidget},409:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const _=__webpack_require__(5),react_diagrams_core_1=__webpack_require__(32),DefaultPortModel_1=__webpack_require__(252);class DefaultNodeModel extends react_diagrams_core_1.NodeModel{constructor(options={},color){"string"==typeof options&&(options={name:options,color:color}),super(Object.assign({type:"default",name:"Untitled",color:"rgb(0,192,255)"},options)),this.portsOut=[],this.portsIn=[]}doClone(lookupTable,clone){clone.portsIn=[],clone.portsOut=[],super.doClone(lookupTable,clone)}removePort(port){super.removePort(port),port.getOptions().in?this.portsIn.splice(this.portsIn.indexOf(port),1):this.portsOut.splice(this.portsOut.indexOf(port),1)}addPort(port){return super.addPort(port),port.getOptions().in?-1===this.portsIn.indexOf(port)&&this.portsIn.push(port):-1===this.portsOut.indexOf(port)&&this.portsOut.push(port),port}addInPort(label,after=!0){const p=new DefaultPortModel_1.DefaultPortModel({in:!0,name:label,label:label,alignment:react_diagrams_core_1.PortModelAlignment.LEFT});return after||this.portsIn.splice(0,0,p),this.addPort(p)}addOutPort(label,after=!0){const p=new DefaultPortModel_1.DefaultPortModel({in:!1,name:label,label:label,alignment:react_diagrams_core_1.PortModelAlignment.RIGHT});return after||this.portsOut.splice(0,0,p),this.addPort(p)}deserialize(event){super.deserialize(event),this.options.name=event.data.name,this.options.color=event.data.color,this.portsIn=_.map(event.data.portsInOrder,id=>this.getPortFromID(id)),this.portsOut=_.map(event.data.portsOutOrder,id=>this.getPortFromID(id))}serialize(){return Object.assign(Object.assign({},super.serialize()),{name:this.options.name,color:this.options.color,portsInOrder:_.map(this.portsIn,port=>port.getID()),portsOutOrder:_.map(this.portsOut,port=>port.getID())})}getInPorts(){return this.portsIn}getOutPorts(){return this.portsOut}}exports.DefaultNodeModel=DefaultNodeModel},410:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),_=__webpack_require__(5),DefaultPortLabelWidget_1=__webpack_require__(411),styled_1=__webpack_require__(18);var S;!function(S){S.Node=styled_1.default.div`
		background-color: ${p=>p.background};
		border-radius: 5px;
		font-family: sans-serif;
		color: white;
		border: solid 2px black;
		overflow: visible;
		font-size: 11px;
		border: solid 2px ${p=>p.selected?"rgb(0,192,255)":"black"};
	`,S.Title=styled_1.default.div`
		background: rgba(0, 0, 0, 0.3);
		display: flex;
		white-space: nowrap;
		justify-items: center;
	`,S.TitleName=styled_1.default.div`
		flex-grow: 1;
		padding: 5px 5px;
	`,S.Ports=styled_1.default.div`
		display: flex;
		background-image: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2));
	`,S.PortsContainer=styled_1.default.div`
		flex-grow: 1;
		display: flex;
		flex-direction: column;

		&:first-of-type {
			margin-right: 10px;
		}

		&:only-child {
			margin-right: 0px;
		}
	`}(S||(S={}));class DefaultNodeWidget extends React.Component{constructor(){super(...arguments),this.generatePort=port=>React.createElement(DefaultPortLabelWidget_1.DefaultPortLabel,{engine:this.props.engine,port:port,key:port.getID()})}render(){return React.createElement(S.Node,{"data-default-node-name":this.props.node.getOptions().name,selected:this.props.node.isSelected(),background:this.props.node.getOptions().color},React.createElement(S.Title,null,React.createElement(S.TitleName,null,this.props.node.getOptions().name)),React.createElement(S.Ports,null,React.createElement(S.PortsContainer,null,_.map(this.props.node.getInPorts(),this.generatePort)),React.createElement(S.PortsContainer,null,_.map(this.props.node.getOutPorts(),this.generatePort))))}}exports.DefaultNodeWidget=DefaultNodeWidget},411:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),react_diagrams_core_1=__webpack_require__(32),styled_1=__webpack_require__(18);var S;!function(S){S.PortLabel=styled_1.default.div`
		display: flex;
		margin-top: 1px;
		align-items: center;
	`,S.Label=styled_1.default.div`
		padding: 0 5px;
		flex-grow: 1;
	`,S.Port=styled_1.default.div`
		width: 15px;
		height: 15px;
		background: rgba(white, 0.1);

		&:hover {
			background: rgb(192, 255, 0);
		}
	`}(S||(S={}));class DefaultPortLabel extends React.Component{render(){const port=React.createElement(react_diagrams_core_1.PortWidget,{engine:this.props.engine,port:this.props.port},React.createElement(S.Port,null)),label=React.createElement(S.Label,null,this.props.port.getOptions().label);return React.createElement(S.PortLabel,null,this.props.port.getOptions().in?port:label,this.props.port.getOptions().in?label:port)}}exports.DefaultPortLabel=DefaultPortLabel},412:function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(413)),__export(__webpack_require__(414)),__export(__webpack_require__(415)),__export(__webpack_require__(417)),__export(__webpack_require__(418)),__export(__webpack_require__(419)),__export(__webpack_require__(416)),__export(__webpack_require__(816))},413:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),PathFindingLinkModel_1=__webpack_require__(414),PathFindingLinkWidget_1=__webpack_require__(415),_=__webpack_require__(5),Path=__webpack_require__(814),react_diagrams_defaults_1=__webpack_require__(78),react_canvas_core_1=__webpack_require__(3);class PathFindingLinkFactory extends react_diagrams_defaults_1.DefaultLinkFactory{constructor(){super(PathFindingLinkFactory.NAME),this.ROUTING_SCALING_FACTOR=5,this.canvasMatrix=[],this.routingMatrix=[],this.hAdjustmentFactor=0,this.vAdjustmentFactor=0,this.calculateMatrixDimensions=()=>{const allNodesCoords=_.values(this.engine.getModel().getNodes()).map(item=>({x:item.getX(),width:item.width,y:item.getY(),height:item.height})),allLinks=_.values(this.engine.getModel().getLinks()),allPortsCoords=_.flatMap(allLinks.map(link=>[link.getSourcePort(),link.getTargetPort()])).filter(port=>null!==port).map(item=>({x:item.getX(),width:item.width,y:item.getY(),height:item.height})),allPointsCoords=_.flatMap(allLinks.map(link=>link.getPoints())).map(item=>({x:item.getX(),width:0,y:item.getY(),height:0})),sumProps=(object,props)=>_.reduce(props,(acc,prop)=>acc+_.get(object,prop,0),0),canvas=this.engine.getCanvas(),concatedCoords=_.concat(allNodesCoords,allPortsCoords,allPointsCoords),minX=Math.floor(Math.min(_.get(_.minBy(concatedCoords,"x"),"x",0),0)/this.ROUTING_SCALING_FACTOR)*this.ROUTING_SCALING_FACTOR,maxXElement=_.maxBy(concatedCoords,item=>sumProps(item,["x","width"])),maxX=Math.max(sumProps(maxXElement,["x","width"]),canvas.offsetWidth),minYCoords=_.minBy(concatedCoords,"y"),minY=Math.floor(Math.min(_.get(minYCoords,"y",0),0)/this.ROUTING_SCALING_FACTOR)*this.ROUTING_SCALING_FACTOR,maxYElement=_.maxBy(concatedCoords,item=>sumProps(item,["y","height"])),maxY=Math.max(sumProps(maxYElement,["y","height"]),canvas.offsetHeight);return{width:Math.ceil(Math.abs(minX)+maxX),hAdjustmentFactor:Math.abs(minX)/this.ROUTING_SCALING_FACTOR+1,height:Math.ceil(Math.abs(minY)+maxY),vAdjustmentFactor:Math.abs(minY)/this.ROUTING_SCALING_FACTOR+1}},this.markNodes=matrix=>{_.values(this.engine.getModel().getNodes()).forEach(node=>{const startX=Math.floor(node.getX()/this.ROUTING_SCALING_FACTOR),endX=Math.ceil((node.getX()+node.width)/this.ROUTING_SCALING_FACTOR),startY=Math.floor(node.getY()/this.ROUTING_SCALING_FACTOR),endY=Math.ceil((node.getY()+node.height)/this.ROUTING_SCALING_FACTOR);for(let x=startX-1;x<=endX+1;x++)for(let y=startY-1;y<endY+1;y++)this.markMatrixPoint(matrix,this.translateRoutingX(x),this.translateRoutingY(y))})},this.markPorts=matrix=>{_.flatMap(_.values(this.engine.getModel().getLinks()).map(link=>[].concat(link.getSourcePort(),link.getTargetPort()))).filter(port=>null!==port).forEach(port=>{const startX=Math.floor(port.x/this.ROUTING_SCALING_FACTOR),endX=Math.ceil((port.x+port.width)/this.ROUTING_SCALING_FACTOR),startY=Math.floor(port.y/this.ROUTING_SCALING_FACTOR),endY=Math.ceil((port.y+port.height)/this.ROUTING_SCALING_FACTOR);for(let x=startX-1;x<=endX+1;x++)for(let y=startY-1;y<endY+1;y++)this.markMatrixPoint(matrix,this.translateRoutingX(x),this.translateRoutingY(y))})},this.markMatrixPoint=(matrix,x,y)=>{void 0!==matrix[y]&&void 0!==matrix[y][x]&&(matrix[y][x]=1)}}setDiagramEngine(engine){super.setDiagramEngine(engine),engine.getStateMachine().registerListener({stateChanged:event=>{if(event.newState instanceof react_canvas_core_1.AbstractDisplacementState){const deRegister=engine.getActionEventBus().registerAction(new react_canvas_core_1.Action({type:react_canvas_core_1.InputType.MOUSE_UP,fire:()=>{this.calculateRoutingMatrix(),engine.repaintCanvas(),deRegister()}}))}}}),this.listener=engine.registerListener({canvasReady:()=>{_.defer(()=>{this.calculateRoutingMatrix(),engine.repaintCanvas()})}})}setFactoryBank(bank){super.setFactoryBank(bank),!bank&&this.listener&&this.listener.deregister()}generateReactWidget(event){return React.createElement(PathFindingLinkWidget_1.PathFindingLinkWidget,{diagramEngine:this.engine,link:event.model,factory:this})}generateModel(event){return new PathFindingLinkModel_1.PathFindingLinkModel}getCanvasMatrix(){return 0===this.canvasMatrix.length&&this.calculateCanvasMatrix(),this.canvasMatrix}calculateCanvasMatrix(){const{width:canvasWidth,hAdjustmentFactor:hAdjustmentFactor,height:canvasHeight,vAdjustmentFactor:vAdjustmentFactor}=this.calculateMatrixDimensions();this.hAdjustmentFactor=hAdjustmentFactor,this.vAdjustmentFactor=vAdjustmentFactor;const matrixWidth=Math.ceil(canvasWidth/this.ROUTING_SCALING_FACTOR),matrixHeight=Math.ceil(canvasHeight/this.ROUTING_SCALING_FACTOR);this.canvasMatrix=_.range(0,matrixHeight).map(()=>new Array(matrixWidth).fill(0))}getRoutingMatrix(){return 0===this.routingMatrix.length&&this.calculateRoutingMatrix(),this.routingMatrix}calculateRoutingMatrix(){const matrix=_.cloneDeep(this.getCanvasMatrix());this.markNodes(matrix),this.markPorts(matrix),this.routingMatrix=matrix}translateRoutingX(x,reverse=!1){return x+this.hAdjustmentFactor*(reverse?-1:1)}translateRoutingY(y,reverse=!1){return y+this.vAdjustmentFactor*(reverse?-1:1)}generateDynamicPath(pathCoords){let path=Path();return path=path.moveto(pathCoords[0][0]*this.ROUTING_SCALING_FACTOR,pathCoords[0][1]*this.ROUTING_SCALING_FACTOR),pathCoords.slice(1).forEach(coords=>{path=path.lineto(coords[0]*this.ROUTING_SCALING_FACTOR,coords[1]*this.ROUTING_SCALING_FACTOR)}),path.print()}}exports.PathFindingLinkFactory=PathFindingLinkFactory,PathFindingLinkFactory.NAME="pathfinding"},414:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const PathFindingLinkFactory_1=__webpack_require__(413),react_diagrams_defaults_1=__webpack_require__(78);class PathFindingLinkModel extends react_diagrams_defaults_1.DefaultLinkModel{constructor(options={}){super(Object.assign({type:PathFindingLinkFactory_1.PathFindingLinkFactory.NAME},options))}performanceTune(){return!1}}exports.PathFindingLinkModel=PathFindingLinkModel},415:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),_=__webpack_require__(5),PathFinding_1=__webpack_require__(416),react_diagrams_defaults_1=__webpack_require__(78);class PathFindingLinkWidget extends React.Component{constructor(props){super(props),this.refPaths=[],this.state={selected:!1},this.pathFinding=new PathFinding_1.default(this.props.factory)}componentDidUpdate(){this.props.link.setRenderedPaths(this.refPaths.map(ref=>ref.current))}componentDidMount(){this.props.link.setRenderedPaths(this.refPaths.map(ref=>ref.current))}componentWillUnmount(){this.props.link.setRenderedPaths([])}generateLink(path,id){const ref=React.createRef();return this.refPaths.push(ref),React.createElement(react_diagrams_defaults_1.DefaultLinkSegmentWidget,{key:"link-"+id,path:path,selected:this.state.selected,diagramEngine:this.props.diagramEngine,factory:this.props.diagramEngine.getFactoryForLink(this.props.link),link:this.props.link,forwardRef:ref,onSelection:selected=>{this.setState({selected:selected})},extras:{}})}render(){this.refPaths=[];var points=this.props.link.getPoints(),paths=[];const directPathCoords=this.pathFinding.calculateDirectPath(_.first(points),_.last(points)),routingMatrix=this.props.factory.getRoutingMatrix(),smartLink=this.pathFinding.calculateLinkStartEndCoords(routingMatrix,directPathCoords);if(smartLink){const{start:start,end:end,pathToStart:pathToStart,pathToEnd:pathToEnd}=smartLink,simplifiedPath=this.pathFinding.calculateDynamicPath(routingMatrix,start,end,pathToStart,pathToEnd);paths.push(this.generateLink(this.props.factory.generateDynamicPath(simplifiedPath),"0"))}return React.createElement(React.Fragment,null,paths)}}exports.PathFindingLinkWidget=PathFindingLinkWidget},416:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const PF=__webpack_require__(798),pathFinderInstance=new PF.JumpPointFinder({heuristic:PF.Heuristic.manhattan,diagonalMovement:PF.DiagonalMovement.Never});exports.default=class PathFinding{constructor(factory){this.instance=pathFinderInstance,this.factory=factory}calculateDirectPath(from,to){const matrix=this.factory.getCanvasMatrix(),grid=new PF.Grid(matrix);return pathFinderInstance.findPath(this.factory.translateRoutingX(Math.floor(from.getX()/this.factory.ROUTING_SCALING_FACTOR)),this.factory.translateRoutingY(Math.floor(from.getY()/this.factory.ROUTING_SCALING_FACTOR)),this.factory.translateRoutingX(Math.floor(to.getX()/this.factory.ROUTING_SCALING_FACTOR)),this.factory.translateRoutingY(Math.floor(to.getY()/this.factory.ROUTING_SCALING_FACTOR)),grid)}calculateLinkStartEndCoords(matrix,path){const startIndex=path.findIndex(point=>!!matrix[point[1]]&&0===matrix[point[1]][point[0]]),endIndex=path.length-1-path.slice().reverse().findIndex(point=>!!matrix[point[1]]&&0===matrix[point[1]][point[0]]);if(-1===startIndex||-1===endIndex)return;const pathToStart=path.slice(0,startIndex),pathToEnd=path.slice(endIndex);return{start:{x:path[startIndex][0],y:path[startIndex][1]},end:{x:path[endIndex][0],y:path[endIndex][1]},pathToStart:pathToStart,pathToEnd:pathToEnd}}calculateDynamicPath(routingMatrix,start,end,pathToStart,pathToEnd){const grid=new PF.Grid(routingMatrix),dynamicPath=pathFinderInstance.findPath(start.x,start.y,end.x,end.y,grid),pathCoords=pathToStart.concat(dynamicPath,pathToEnd).map(coords=>[this.factory.translateRoutingX(coords[0],!0),this.factory.translateRoutingY(coords[1],!0)]);return PF.Util.compressPath(pathCoords)}}},417:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),react_diagrams_core_1=__webpack_require__(32),react_diagrams_defaults_1=__webpack_require__(78),geometry_1=__webpack_require__(55);class RightAngleLinkWidget extends React.Component{constructor(props){super(props),this.handleMove=function(event){this.draggingEvent(event,this.dragging_index)}.bind(this),this.handleUp=function(event){this.setState({canDrag:!1,selected:!1}),window.removeEventListener("mousemove",this.handleMove),window.removeEventListener("mouseup",this.handleUp)}.bind(this),this.refPaths=[],this.state={selected:!1,canDrag:!1},this.dragging_index=0}componentDidUpdate(){this.props.link.setRenderedPaths(this.refPaths.map(ref=>ref.current))}componentDidMount(){this.props.link.setRenderedPaths(this.refPaths.map(ref=>ref.current))}componentWillUnmount(){this.props.link.setRenderedPaths([])}generateLink(path,extraProps,id){const ref=React.createRef();return this.refPaths.push(ref),React.createElement(react_diagrams_defaults_1.DefaultLinkSegmentWidget,{key:"link-"+id,path:path,selected:this.state.selected,diagramEngine:this.props.diagramEngine,factory:this.props.diagramEngine.getFactoryForLink(this.props.link),link:this.props.link,forwardRef:ref,onSelection:selected=>{this.setState({selected:selected})},extras:extraProps})}calculatePositions(points,event,index,coordinate){if(0===index){let point=new react_diagrams_core_1.PointModel({link:this.props.link,position:new geometry_1.Point(points[index].getX(),points[index].getY())});return this.props.link.addPoint(point,index),void this.dragging_index++}if(index===points.length-2){let point=new react_diagrams_core_1.PointModel({link:this.props.link,position:new geometry_1.Point(points[index+1].getX(),points[index+1].getY())});return void this.props.link.addPoint(point,index+1)}if(index-2>0){let _points={[index-2]:points[index-2].getPosition(),[index+1]:points[index+1].getPosition(),[index-1]:points[index-1].getPosition()};if(Math.abs(_points[index-1][coordinate]-_points[index+1][coordinate])<5)return _points[index-2][coordinate]=this.props.diagramEngine.getRelativeMousePoint(event)[coordinate],_points[index+1][coordinate]=this.props.diagramEngine.getRelativeMousePoint(event)[coordinate],points[index-2].setPosition(_points[index-2]),points[index+1].setPosition(_points[index+1]),points[index-1].remove(),points[index-1].remove(),this.dragging_index--,void this.dragging_index--}if(index+2<points.length-2){let _points={[index+3]:points[index+3].getPosition(),[index+2]:points[index+2].getPosition(),[index+1]:points[index+1].getPosition(),[index]:points[index].getPosition()};if(Math.abs(_points[index+1][coordinate]-_points[index+2][coordinate])<5)return _points[index][coordinate]=this.props.diagramEngine.getRelativeMousePoint(event)[coordinate],_points[index+3][coordinate]=this.props.diagramEngine.getRelativeMousePoint(event)[coordinate],points[index].setPosition(_points[index]),points[index+3].setPosition(_points[index+3]),points[index+1].remove(),void points[index+1].remove()}let _points={[index]:points[index].getPosition(),[index+1]:points[index+1].getPosition()};_points[index][coordinate]=this.props.diagramEngine.getRelativeMousePoint(event)[coordinate],_points[index+1][coordinate]=this.props.diagramEngine.getRelativeMousePoint(event)[coordinate],points[index].setPosition(_points[index]),points[index+1].setPosition(_points[index+1])}draggingEvent(event,index){let points=this.props.link.getPoints(),dx=Math.abs(points[index].getX()-points[index+1].getX()),dy=Math.abs(points[index].getY()-points[index+1].getY());0===dx?this.calculatePositions(points,event,index,"x"):0===dy&&this.calculatePositions(points,event,index,"y"),this.props.link.setFirstAndLastPathsDirection()}render(){let points=this.props.link.getPoints(),paths=[],pointLeft=points[0],pointRight=points[points.length-1],hadToSwitch=!1;pointLeft.getX()>pointRight.getX()&&(pointLeft=points[points.length-1],pointRight=points[0],hadToSwitch=!0);let dy=Math.abs(points[0].getY()-points[points.length-1].getY());if(null===this.props.link.getTargetPort()&&2===points.length)[...Array(2)].forEach(item=>{this.props.link.addPoint(new react_diagrams_core_1.PointModel({link:this.props.link,position:new geometry_1.Point(pointLeft.getX(),pointRight.getY())}),1)}),this.props.link.setManuallyFirstAndLastPathsDirection(!0,!0);else if(null===this.props.link.getTargetPort()&&null!==this.props.link.getSourcePort())points[1].setPosition(pointRight.getX()+(pointLeft.getX()-pointRight.getX())/2,hadToSwitch?pointRight.getY():pointLeft.getY()),points[2].setPosition(pointRight.getX()+(pointLeft.getX()-pointRight.getX())/2,hadToSwitch?pointLeft.getY():pointRight.getY());else if(!this.state.canDrag&&points.length>2)for(let i=1;i<points.length;i+=points.length-2)i-1==0?this.props.link.getFirstPathXdirection()?points[i].setPosition(points[i].getX(),points[i-1].getY()):points[i].setPosition(points[i-1].getX(),points[i].getY()):this.props.link.getLastPathXdirection()?points[i-1].setPosition(points[i-1].getX(),points[i].getY()):points[i-1].setPosition(points[i].getX(),points[i-1].getY());2!==points.length||0===dy||this.state.canDrag||this.props.link.addPoint(new react_diagrams_core_1.PointModel({link:this.props.link,position:new geometry_1.Point(pointLeft.getX(),pointRight.getY())}));for(let j=0;j<points.length-1;j++)paths.push(this.generateLink(react_diagrams_core_1.LinkWidget.generateLinePath(points[j],points[j+1]),{"data-linkid":this.props.link.getID(),"data-point":j,onMouseDown:event=>{0===event.button&&(this.setState({canDrag:!0}),this.dragging_index=j,window.addEventListener("mousemove",this.handleMove),window.addEventListener("mouseup",this.handleUp))},onMouseEnter:event=>{this.setState({selected:!0}),this.props.link.lastHoverIndexOfPath=j}},j));return this.refPaths=[],React.createElement("g",{"data-default-link-test":this.props.link.getOptions().testName},paths)}}exports.RightAngleLinkWidget=RightAngleLinkWidget,RightAngleLinkWidget.defaultProps={color:"red",width:3,link:null,smooth:!1,diagramEngine:null,factory:null}},418:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),RightAngleLinkWidget_1=__webpack_require__(417),react_diagrams_defaults_1=__webpack_require__(78),RightAngleLinkModel_1=__webpack_require__(419);class RightAngleLinkFactory extends react_diagrams_defaults_1.DefaultLinkFactory{constructor(){super(RightAngleLinkFactory.NAME)}generateModel(event){return new RightAngleLinkModel_1.RightAngleLinkModel}generateReactWidget(event){return React.createElement(RightAngleLinkWidget_1.RightAngleLinkWidget,{diagramEngine:this.engine,link:event.model,factory:this})}}exports.RightAngleLinkFactory=RightAngleLinkFactory,RightAngleLinkFactory.NAME="rightAngle"},419:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_defaults_1=__webpack_require__(78),RightAngleLinkFactory_1=__webpack_require__(418);class RightAngleLinkModel extends react_diagrams_defaults_1.DefaultLinkModel{constructor(options={}){super(Object.assign({type:RightAngleLinkFactory_1.RightAngleLinkFactory.NAME},options)),this.lastHoverIndexOfPath=0,this._lastPathXdirection=!1,this._firstPathXdirection=!1}setFirstAndLastPathsDirection(){let points=this.getPoints();for(let i=1;i<points.length;i+=points.length-2){let dx=Math.abs(points[i].getX()-points[i-1].getX()),dy=Math.abs(points[i].getY()-points[i-1].getY());i-1==0?this._firstPathXdirection=dx>dy:this._lastPathXdirection=dx>dy}}addPoint(pointModel,index=1){return super.addPoint(pointModel,index),this.setFirstAndLastPathsDirection(),pointModel}deserialize(event){super.deserialize(event),this.setFirstAndLastPathsDirection()}setManuallyFirstAndLastPathsDirection(first,last){this._firstPathXdirection=first,this._lastPathXdirection=last}getLastPathXdirection(){return this._lastPathXdirection}getFirstPathXdirection(){return this._firstPathXdirection}setWidth(width){this.options.width=width,this.fireEvent({width:width},"widthChanged")}setColor(color){this.options.color=color,this.fireEvent({color:color},"colorChanged")}}exports.RightAngleLinkModel=RightAngleLinkModel},449:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(6),DiamondPortModel_1=__webpack_require__(450);class DiamondNodeModel extends react_diagrams_1.NodeModel{constructor(){super({type:"diamond"}),this.addPort(new DiamondPortModel_1.DiamondPortModel(react_diagrams_1.PortModelAlignment.TOP)),this.addPort(new DiamondPortModel_1.DiamondPortModel(react_diagrams_1.PortModelAlignment.LEFT)),this.addPort(new DiamondPortModel_1.DiamondPortModel(react_diagrams_1.PortModelAlignment.BOTTOM)),this.addPort(new DiamondPortModel_1.DiamondPortModel(react_diagrams_1.PortModelAlignment.RIGHT))}}exports.DiamondNodeModel=DiamondNodeModel},450:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(6);class DiamondPortModel extends react_diagrams_1.PortModel{constructor(alignment){super({type:"diamond",name:alignment,alignment:alignment})}createLinkModel(){return new react_diagrams_1.DefaultLinkModel}}exports.DiamondPortModel=DiamondPortModel},458:function(module,exports,__webpack_require__){__webpack_require__(459),__webpack_require__(605),module.exports=__webpack_require__(606)},49:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),styled_1=__webpack_require__(18);var S;!function(S){S.Toolbar=styled_1.default.div`
		padding: 5px;
		display: flex;
		flex-shrink: 0;
	`,S.Content=styled_1.default.div`
		flex-grow: 1;
		height: 100%;
	`,S.Container=styled_1.default.div`
		background: black;
		display: flex;
		flex-direction: column;
		height: 100%;
		border-radius: 5px;
		overflow: hidden;
	`}(S||(S={})),exports.DemoButton=styled_1.default.button`
	background: rgb(60, 60, 60);
	font-size: 14px;
	padding: 5px 10px;
	border: none;
	color: white;
	outline: none;
	cursor: pointer;
	margin: 2px;
	border-radius: 3px;

	&:hover {
		background: rgb(0, 192, 255);
	}
`;class DemoWorkspaceWidget extends React.Component{render(){return React.createElement(S.Container,null,React.createElement(S.Toolbar,null,this.props.buttons),React.createElement(S.Content,null,this.props.children))}}exports.DemoWorkspaceWidget=DemoWorkspaceWidget},523:function(module,exports){},55:function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(167)),__export(__webpack_require__(241)),__export(__webpack_require__(382)),__export(__webpack_require__(779))},6:function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_core_1=__webpack_require__(32),react_diagrams_defaults_1=__webpack_require__(78),react_diagrams_routing_1=__webpack_require__(412),react_canvas_core_1=__webpack_require__(3);__export(__webpack_require__(32)),__export(__webpack_require__(78)),__export(__webpack_require__(412)),exports.default=(options={})=>{const engine=new react_diagrams_core_1.DiagramEngine(options);return engine.getLayerFactories().registerFactory(new react_diagrams_core_1.NodeLayerFactory),engine.getLayerFactories().registerFactory(new react_diagrams_core_1.LinkLayerFactory),engine.getLayerFactories().registerFactory(new react_canvas_core_1.SelectionBoxLayerFactory),engine.getLabelFactories().registerFactory(new react_diagrams_defaults_1.DefaultLabelFactory),engine.getNodeFactories().registerFactory(new react_diagrams_defaults_1.DefaultNodeFactory),engine.getLinkFactories().registerFactory(new react_diagrams_defaults_1.DefaultLinkFactory),engine.getLinkFactories().registerFactory(new react_diagrams_routing_1.PathFindingLinkFactory),engine.getPortFactories().registerFactory(new react_diagrams_defaults_1.DefaultPortFactory),engine.getStateMachine().pushState(new react_diagrams_core_1.DefaultDiagramState),engine}},606:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(264);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)((function loadStories(){__webpack_require__(752)}),module)}.call(this,__webpack_require__(607)(module))},67:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const Toolkit_1=__webpack_require__(166);!function(InputType){InputType.MOUSE_DOWN="mouse-down",InputType.MOUSE_UP="mouse-up",InputType.MOUSE_MOVE="mouse-move",InputType.MOUSE_WHEEL="mouse-wheel",InputType.KEY_DOWN="key-down",InputType.KEY_UP="key-up"}(exports.InputType||(exports.InputType={}));exports.Action=class Action{constructor(options){this.options=options,this.id=Toolkit_1.Toolkit.UID()}setEngine(engine){this.engine=engine}}},752:function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0});const react_1=__webpack_require__(264),addon_options_1=__webpack_require__(753),theming_1=__webpack_require__(755);__webpack_require__(772);const react_canvas_core_1=__webpack_require__(3);react_canvas_core_1.Toolkit.TESTING=!0,react_1.addParameters({options:{theme:theming_1.themes.dark}}),addon_options_1.setOptions({name:"STORM React Diagrams",url:"https://github.com/projectstorm/react-diagrams",addonPanelInRight:!0}),react_1.addDecorator(fn=>(react_canvas_core_1.Toolkit.TESTING_UID=0,fn()));const demo_simple_1=__webpack_require__(784),demo_simple_flow_1=__webpack_require__(929),demo_performance_1=__webpack_require__(930),demo_locks_1=__webpack_require__(931),demo_grid_1=__webpack_require__(932),demo_listeners_1=__webpack_require__(933),demo_zoom_to_fit_1=__webpack_require__(946),demo_zoom_to_fit_nodes_1=__webpack_require__(947),demo_labelled_links_1=__webpack_require__(948),demo_dynamic_ports_1=__webpack_require__(949),demo_alternative_linking_1=__webpack_require__(950),demo_custom_delete_keys_1=__webpack_require__(953),demo_custom_action_1=__webpack_require__(954);react_1.storiesOf("Simple Usage",module).add("Simple example",demo_simple_1.default).add("Simple flow example",demo_simple_flow_1.default).add("Performance demo",demo_performance_1.default).add("Locked widget",demo_locks_1.default).add("Canvas grid size",demo_grid_1.default).add("Events and listeners",demo_listeners_1.default).add("Zoom to fit",demo_zoom_to_fit_1.default).add("Zoom to fit nodes",demo_zoom_to_fit_nodes_1.default).add("Dynamic ports",demo_dynamic_ports_1.default).add("Links with labels",demo_labelled_links_1.default);const demo_cloning_1=__webpack_require__(955),demo_serializing_1=__webpack_require__(956),demo_mutate_graph_1=__webpack_require__(958),demo_drag_and_drop_1=__webpack_require__(959),demo_smart_routing_1=__webpack_require__(964),demo_right_angles_routing_1=__webpack_require__(965);react_1.storiesOf("Advanced Techniques",module).add("Clone Selected",demo_cloning_1.default).add("Serializing and de-serializing",demo_serializing_1.default).add("Programatically modifying graph",demo_mutate_graph_1.default).add("Drag and drop",demo_drag_and_drop_1.default).add("Smart routing",demo_smart_routing_1.default).add("Right angles routing",demo_right_angles_routing_1.default).add("Linking by clicking instead of dragging",demo_alternative_linking_1.default).add("Setting custom delete keys",demo_custom_delete_keys_1.default);const demo_custom_node1_1=__webpack_require__(966),demo_custom_link1_1=__webpack_require__(970),demo_custom_link2_1=__webpack_require__(971);react_1.storiesOf("Customization",module).add("Custom diamond node",demo_custom_node1_1.default).add("Custom animated links",demo_custom_link1_1.default).add("Custom link ends (arrows)",demo_custom_link2_1.default).add("Custom event",demo_custom_action_1.default);const demo_dagre_1=__webpack_require__(972),demo_animation_1=__webpack_require__(973);react_1.storiesOf("3rd party libraries",module).add("Auto Distribute (Dagre)",demo_dagre_1.default).add("Animated node moves (GSAP)",demo_animation_1.default)}).call(this,__webpack_require__(62)(module))},772:function(module,exports,__webpack_require__){var api=__webpack_require__(773),content=__webpack_require__(774);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},774:function(module,exports,__webpack_require__){(exports=__webpack_require__(775)(!1)).push([module.i,"html,\nbody,\n#root {\n\theight: 100%;\n\tpadding: 0;\n\tmargin: 0;\n}\n",""]),module.exports=exports},776:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const lodash_1=__webpack_require__(5),FactoryBank_1=__webpack_require__(381),BaseObserver_1=__webpack_require__(125),geometry_1=__webpack_require__(55),ActionEventBus_1=__webpack_require__(383),ZoomCanvasAction_1=__webpack_require__(384),DeleteItemsAction_1=__webpack_require__(385),StateMachine_1=__webpack_require__(386);class CanvasEngine extends BaseObserver_1.BaseObserver{constructor(options={}){super(),this.model=null,this.eventBus=new ActionEventBus_1.ActionEventBus(this),this.stateMachine=new StateMachine_1.StateMachine(this),this.layerFactories=new FactoryBank_1.FactoryBank,this.registerFactoryBank(this.layerFactories),this.options=Object.assign({registerDefaultDeleteItemsAction:!0,registerDefaultZoomCanvasAction:!0,repaintDebounceMs:0},options),!0===this.options.registerDefaultZoomCanvasAction&&this.eventBus.registerAction(new ZoomCanvasAction_1.ZoomCanvasAction),!0===this.options.registerDefaultDeleteItemsAction&&this.eventBus.registerAction(new DeleteItemsAction_1.DeleteItemsAction)}getStateMachine(){return this.stateMachine}getRelativeMousePoint(event){const point=this.getRelativePoint(event.clientX,event.clientY);return new geometry_1.Point((point.x-this.model.getOffsetX())/(this.model.getZoomLevel()/100),(point.y-this.model.getOffsetY())/(this.model.getZoomLevel()/100))}getRelativePoint(x,y){const canvasRect=this.canvas.getBoundingClientRect();return new geometry_1.Point(x-canvasRect.left,y-canvasRect.top)}registerFactoryBank(factory){factory.registerListener({factoryAdded:event=>{event.factory.setDiagramEngine(this)},factoryRemoved:event=>{event.factory.setDiagramEngine(null)}})}getActionEventBus(){return this.eventBus}getLayerFactories(){return this.layerFactories}getFactoryForLayer(layer){return"string"==typeof layer?this.layerFactories.getFactory(layer):this.layerFactories.getFactory(layer.getType())}setModel(model){this.model=model,this.canvas&&requestAnimationFrame(()=>{this.repaintCanvas()})}getModel(){return this.model}repaintCanvas(promise){const{repaintDebounceMs:repaintDebounceMs}=this.options,repaint=()=>{this.iterateListeners(listener=>{listener.repaintCanvas&&listener.repaintCanvas()})};let repaintFn=repaint;if(repaintDebounceMs>0&&(repaintFn=lodash_1.debounce(repaint,repaintDebounceMs)),promise)return new Promise(resolve=>{const l=this.registerListener({rendered:()=>{resolve(),l.deregister()}});repaintFn()});repaintFn()}setCanvas(canvas){this.canvas!==canvas&&(this.canvas=canvas,canvas&&this.fireEvent({},"canvasReady"))}getCanvas(){return this.canvas}getMouseElement(event){return null}zoomToFit(){const xFactor=this.canvas.clientWidth/this.canvas.scrollWidth,yFactor=this.canvas.clientHeight/this.canvas.scrollHeight,zoomFactor=xFactor<yFactor?xFactor:yFactor;this.model.setZoomLevel(this.model.getZoomLevel()*zoomFactor),this.model.setOffset(0,0),this.repaintCanvas()}}exports.CanvasEngine=CanvasEngine},779:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const Point_1=__webpack_require__(167),Polygon_1=__webpack_require__(241);var BezierCurvepPoints;!function(BezierCurvepPoints){BezierCurvepPoints[BezierCurvepPoints.SOURCE=0]="SOURCE",BezierCurvepPoints[BezierCurvepPoints.SOURCE_CONTROL=1]="SOURCE_CONTROL",BezierCurvepPoints[BezierCurvepPoints.TARGET_CONTROL=2]="TARGET_CONTROL",BezierCurvepPoints[BezierCurvepPoints.TARGET=3]="TARGET"}(BezierCurvepPoints=exports.BezierCurvepPoints||(exports.BezierCurvepPoints={}));class BezierCurve extends Polygon_1.Polygon{constructor(){super([new Point_1.Point(0,0),new Point_1.Point(0,0),new Point_1.Point(0,0),new Point_1.Point(0,0)])}getSVGCurve(){return`M${this.getSource().toSVG()} C${this.getSourceControl().toSVG()}, ${this.getTargetControl().toSVG()}, ${this.getTarget().toSVG()}`}setPoints(points){if(4!==points.length)throw new Error("BezierCurve must have extactly 4 points");super.setPoints(points)}getSource(){return this.points[BezierCurvepPoints.SOURCE]}getSourceControl(){return this.points[BezierCurvepPoints.SOURCE_CONTROL]}getTargetControl(){return this.points[BezierCurvepPoints.TARGET_CONTROL]}getTarget(){return this.points[BezierCurvepPoints.TARGET]}setSource(point){this.points[BezierCurvepPoints.SOURCE]=point}setSourceControl(point){this.points[BezierCurvepPoints.SOURCE_CONTROL]=point}setTargetControl(point){this.points[BezierCurvepPoints.TARGET_CONTROL]=point}setTarget(point){this.points[BezierCurvepPoints.TARGET]=point}}exports.BezierCurve=BezierCurve},78:function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(794)),__export(__webpack_require__(250)),__export(__webpack_require__(405)),__export(__webpack_require__(795)),__export(__webpack_require__(251)),__export(__webpack_require__(406)),__export(__webpack_require__(408)),__export(__webpack_require__(407)),__export(__webpack_require__(796)),__export(__webpack_require__(409)),__export(__webpack_require__(410)),__export(__webpack_require__(797)),__export(__webpack_require__(411)),__export(__webpack_require__(252))},780:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),TransformLayerWidget_1=__webpack_require__(391),styled_1=__webpack_require__(18),SmartLayerWidget_1=__webpack_require__(392);var S;!function(S){S.Canvas=styled_1.default.div`
		position: relative;
		cursor: move;
		overflow: hidden;
	`}(S||(S={}));class CanvasWidget extends React.Component{constructor(props){super(props),this.ref=React.createRef(),this.state={action:null,diagramEngineListener:null}}componentWillUnmount(){this.props.engine.deregisterListener(this.canvasListener),this.props.engine.setCanvas(null),document.removeEventListener("keyup",this.keyUp),document.removeEventListener("keydown",this.keyDown)}registerCanvas(){this.props.engine.setCanvas(this.ref.current),this.props.engine.iterateListeners(list=>{list.rendered&&list.rendered()})}componentDidUpdate(){this.registerCanvas()}componentDidMount(){this.canvasListener=this.props.engine.registerListener({repaintCanvas:()=>{this.forceUpdate()}}),this.keyDown=event=>{this.props.engine.getActionEventBus().fireAction({event:event})},this.keyUp=event=>{this.props.engine.getActionEventBus().fireAction({event:event})},document.addEventListener("keyup",this.keyUp),document.addEventListener("keydown",this.keyDown),this.registerCanvas()}render(){const model=this.props.engine.getModel();return React.createElement(S.Canvas,{className:this.props.className,ref:this.ref,onWheel:event=>{this.props.engine.getActionEventBus().fireAction({event:event})},onMouseDown:event=>{this.props.engine.getActionEventBus().fireAction({event:event})},onMouseUp:event=>{this.props.engine.getActionEventBus().fireAction({event:event})},onMouseMove:event=>{this.props.engine.getActionEventBus().fireAction({event:event})}},model.getLayers().map(layer=>React.createElement(TransformLayerWidget_1.TransformLayerWidget,{layer:layer,key:layer.getID()},React.createElement(SmartLayerWidget_1.SmartLayerWidget,{layer:layer,engine:this.props.engine,key:layer.getID()}))))}}exports.CanvasWidget=CanvasWidget},781:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),AbstractReactFactory_1=__webpack_require__(389),SelectionLayerModel_1=__webpack_require__(245),SelectionBoxWidget_1=__webpack_require__(394);class SelectionBoxLayerFactory extends AbstractReactFactory_1.AbstractReactFactory{constructor(){super("selection")}generateModel(event){return new SelectionLayerModel_1.SelectionLayerModel}generateReactWidget(event){return React.createElement(SelectionBoxWidget_1.SelectionBoxWidget,{rect:event.model.box})}}exports.SelectionBoxLayerFactory=SelectionBoxLayerFactory},782:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),_=__webpack_require__(5);class PeformanceWidget extends React.Component{shouldComponentUpdate(nextProps,nextState,nextContext){return!this.props.model.performanceTune()||(this.props.model!==nextProps.model||!_.isEqual(this.props.serialized,nextProps.serialized))}render(){return this.props.children()}}exports.PeformanceWidget=PeformanceWidget},783:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const State_1=__webpack_require__(169),Action_1=__webpack_require__(67),DragCanvasState_1=__webpack_require__(395),SelectingState_1=__webpack_require__(396),MoveItemsState_1=__webpack_require__(398);class DefaultState extends State_1.State{constructor(){super({name:"default"}),this.childStates=[new SelectingState_1.SelectingState],this.registerAction(new Action_1.Action({type:Action_1.InputType.MOUSE_DOWN,fire:event=>{this.engine.getActionEventBus().getModelForEvent(event)?this.transitionWithEvent(new MoveItemsState_1.MoveItemsState,event):this.transitionWithEvent(new DragCanvasState_1.DragCanvasState,event)}}))}}exports.DefaultState=DefaultState},784:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(6),React=__webpack_require__(0),react_canvas_core_1=__webpack_require__(3),DemoCanvasWidget_1=__webpack_require__(11);exports.default=()=>{var engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel({name:"Node 1",color:"rgb(0,192,255)"});node1.setPosition(100,100);let port1=node1.addOutPort("Out");var node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)");let port2=node2.addInPort("In");node2.setPosition(400,100);let link1=port1.link(port2);return link1.getOptions().testName="Test",link1.addLabel("Hello World!"),model.addAll(node1,node2,link1),engine.setModel(model),React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine}))}},785:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const _=__webpack_require__(5),LinkModel_1=__webpack_require__(246),NodeModel_1=__webpack_require__(170),react_canvas_core_1=__webpack_require__(3),NodeLayerModel_1=__webpack_require__(248),LinkLayerModel_1=__webpack_require__(249);class DiagramModel extends react_canvas_core_1.CanvasModel{constructor(options={}){super(options),this.addLayer(new LinkLayerModel_1.LinkLayerModel),this.addLayer(new NodeLayerModel_1.NodeLayerModel)}deserialize(event){this.layers=[],super.deserialize(event)}addLayer(layer){super.addLayer(layer),layer instanceof NodeLayerModel_1.NodeLayerModel&&(this.activeNodeLayer=layer),layer instanceof LinkLayerModel_1.LinkLayerModel&&(this.activeLinkLayer=layer)}getLinkLayers(){return _.filter(this.layers,layer=>layer instanceof LinkLayerModel_1.LinkLayerModel)}getNodeLayers(){return _.filter(this.layers,layer=>layer instanceof NodeLayerModel_1.NodeLayerModel)}getActiveNodeLayer(){if(!this.activeNodeLayer){const layers=this.getNodeLayers();0===layers.length?this.addLayer(new NodeLayerModel_1.NodeLayerModel):this.activeNodeLayer=layers[0]}return this.activeNodeLayer}getActiveLinkLayer(){if(!this.activeLinkLayer){const layers=this.getLinkLayers();0===layers.length?this.addLayer(new NodeLayerModel_1.NodeLayerModel):this.activeLinkLayer=layers[0]}return this.activeLinkLayer}getNode(node){for(const layer of this.getNodeLayers()){const model=layer.getModel(node);if(model)return model}}getLink(link){for(const layer of this.getLinkLayers()){const model=layer.getModel(link);if(model)return model}}addAll(...models){return _.forEach(models,model=>{model instanceof LinkModel_1.LinkModel?this.addLink(model):model instanceof NodeModel_1.NodeModel&&this.addNode(model)}),models}addLink(link){return this.getActiveLinkLayer().addModel(link),this.fireEvent({link:link,isCreated:!0},"linksUpdated"),link}addNode(node){return this.getActiveNodeLayer().addModel(node),this.fireEvent({node:node,isCreated:!0},"nodesUpdated"),node}removeLink(link){_.some(this.getLinkLayers(),layer=>layer.removeModel(link))&&this.fireEvent({link:link,isCreated:!1},"linksUpdated")}removeNode(node){_.some(this.getNodeLayers(),layer=>layer.removeModel(node))&&this.fireEvent({node:node,isCreated:!1},"nodesUpdated")}getLinks(){return _.flatMap(this.getLinkLayers(),layer=>_.values(layer.getModels()))}getNodes(){return _.flatMap(this.getNodeLayers(),layer=>_.values(layer.getModels()))}}exports.DiagramModel=DiagramModel},786:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_canvas_core_1=__webpack_require__(3);class LabelModel extends react_canvas_core_1.BaseModel{constructor(options){super(Object.assign(Object.assign({},options),{offsetX:options.offsetX||0,offsetY:options.offsetY||0}))}deserialize(event){super.deserialize(event),this.options.offsetX=event.data.offsetX,this.options.offsetY=event.data.offsetY}serialize(){return Object.assign(Object.assign({},super.serialize()),{offsetX:this.options.offsetX,offsetY:this.options.offsetY})}}exports.LabelModel=LabelModel},787:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),styled_1=__webpack_require__(18);var S;!function(S){S.Label=styled_1.default.div`
		display: inline-block;
		position: absolute;
	`,S.Foreign=styled_1.default.foreignObject`
		pointer-events: none;
		overflow: visible;
	`}(S||(S={}));class LabelWidget extends React.Component{constructor(props){super(props),this.findPathAndRelativePositionToRenderLabel=index=>{const link=this.props.label.getParent(),lengths=link.getRenderedPath().map(path=>path.getTotalLength());let labelPosition=lengths.reduce((previousValue,currentValue)=>previousValue+currentValue,0)*(index/(link.getLabels().length+1)),pathIndex=0;for(;pathIndex<link.getRenderedPath().length;){if(labelPosition-lengths[pathIndex]<0)return{path:link.getRenderedPath()[pathIndex],position:labelPosition};labelPosition-=lengths[pathIndex],pathIndex++}},this.calculateLabelPosition=()=>{const found=this.findPathAndRelativePositionToRenderLabel(this.props.index+1);if(!found)return;const{path:path,position:position}=found,labelDimensions_width=this.ref.current.offsetWidth,labelDimensions_height=this.ref.current.offsetHeight,pathCentre=path.getPointAtLength(position),labelCoordinates_x=pathCentre.x-labelDimensions_width/2+this.props.label.getOptions().offsetX,labelCoordinates_y=pathCentre.y-labelDimensions_height/2+this.props.label.getOptions().offsetY;this.ref.current.style.transform=`translate(${labelCoordinates_x}px, ${labelCoordinates_y}px)`},this.ref=React.createRef()}componentDidUpdate(){window.requestAnimationFrame(this.calculateLabelPosition)}componentDidMount(){window.requestAnimationFrame(this.calculateLabelPosition)}render(){const canvas=this.props.engine.getCanvas();return React.createElement(S.Foreign,{key:this.props.label.getID(),width:canvas.offsetWidth,height:canvas.offsetHeight},React.createElement(S.Label,{ref:this.ref},this.props.engine.getFactoryForLabel(this.props.label).generateReactWidget({model:this.props.label})))}}exports.LabelWidget=LabelWidget},788:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),react_canvas_core_1=__webpack_require__(3),LinkLayerModel_1=__webpack_require__(249),LinkLayerWidget_1=__webpack_require__(400);class LinkLayerFactory extends react_canvas_core_1.AbstractReactFactory{constructor(){super("diagram-links")}generateModel(event){return new LinkLayerModel_1.LinkLayerModel}generateReactWidget(event){return React.createElement(LinkLayerWidget_1.LinkLayerWidget,{layer:event.model,engine:this.engine})}}exports.LinkLayerFactory=LinkLayerFactory},790:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),react_canvas_core_1=__webpack_require__(3),NodeLayerModel_1=__webpack_require__(248),NodeLayerWidget_1=__webpack_require__(401);class NodeLayerFactory extends react_canvas_core_1.AbstractReactFactory{constructor(){super("diagram-nodes")}generateModel(event){return new NodeLayerModel_1.NodeLayerModel}generateReactWidget(event){return React.createElement(NodeLayerWidget_1.NodeLayerWidget,{layer:event.model,engine:this.engine})}}exports.NodeLayerFactory=NodeLayerFactory},791:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),_=__webpack_require__(5),react_canvas_core_1=__webpack_require__(3);class PortWidget extends React.Component{constructor(props){super(props),this.ref=React.createRef()}report(){this.props.port.updateCoords(this.props.engine.getPortCoords(this.props.port,this.ref.current))}componentWillUnmount(){this.engineListenerHandle&&this.engineListenerHandle.deregister()}componentDidUpdate(prevProps,prevState,snapshot){this.props.port.reportedPosition||this.report()}componentDidMount(){this.engineListenerHandle=this.props.engine.registerListener({canvasReady:()=>{this.report()}}),this.props.engine.getCanvas()&&this.report()}getExtraProps(){if(react_canvas_core_1.Toolkit.TESTING){return{"data-links":_.keys(this.props.port.getNode().getPort(this.props.port.getName()).links).join(",")}}return{}}render(){return React.createElement("div",Object.assign({style:this.props.style,ref:this.ref,className:"port "+(this.props.className||""),"data-name":this.props.port.getName(),"data-nodeid":this.props.port.getNode().getID()},this.getExtraProps()),this.props.children)}}exports.PortWidget=PortWidget},792:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_canvas_core_1=__webpack_require__(3),PortModel_1=__webpack_require__(171),DragNewLinkState_1=__webpack_require__(403),DragDiagramItemsState_1=__webpack_require__(404);class DefaultDiagramState extends react_canvas_core_1.State{constructor(){super({name:"default-diagrams"}),this.childStates=[new react_canvas_core_1.SelectingState],this.dragCanvas=new react_canvas_core_1.DragCanvasState,this.dragNewLink=new DragNewLinkState_1.DragNewLinkState,this.dragItems=new DragDiagramItemsState_1.DragDiagramItemsState,this.registerAction(new react_canvas_core_1.Action({type:react_canvas_core_1.InputType.MOUSE_DOWN,fire:event=>{const element=this.engine.getActionEventBus().getModelForEvent(event);element?element instanceof PortModel_1.PortModel?this.transitionWithEvent(this.dragNewLink,event):this.transitionWithEvent(this.dragItems,event):this.transitionWithEvent(this.dragCanvas,event)}}))}}exports.DefaultDiagramState=DefaultDiagramState},793:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const NodeModel_1=__webpack_require__(170),geometry_1=__webpack_require__(55),react_canvas_core_1=__webpack_require__(3);class DiagramEngine extends react_canvas_core_1.CanvasEngine{constructor(options={}){super(options),this.maxNumberPointsPerLink=1e3,this.nodeFactories=new react_canvas_core_1.FactoryBank,this.linkFactories=new react_canvas_core_1.FactoryBank,this.portFactories=new react_canvas_core_1.FactoryBank,this.labelFactories=new react_canvas_core_1.FactoryBank;const setup=factory=>{factory.registerListener({factoryAdded:event=>{event.factory.setDiagramEngine(this)},factoryRemoved:event=>{event.factory.setDiagramEngine(null)}})};setup(this.nodeFactories),setup(this.linkFactories),setup(this.portFactories),setup(this.labelFactories)}getMouseElement(event){var target=event.target,diagramModel=this.model,element=react_canvas_core_1.Toolkit.closest(target,".port[data-name]");if(element){var nodeElement=react_canvas_core_1.Toolkit.closest(target,".node[data-nodeid]");return diagramModel.getNode(nodeElement.getAttribute("data-nodeid")).getPort(element.getAttribute("data-name"))}return(element=react_canvas_core_1.Toolkit.closest(target,".point[data-id]"))?diagramModel.getLink(element.getAttribute("data-linkid")).getPointModel(element.getAttribute("data-id")):(element=react_canvas_core_1.Toolkit.closest(target,"[data-linkid]"))?diagramModel.getLink(element.getAttribute("data-linkid")):(element=react_canvas_core_1.Toolkit.closest(target,".node[data-nodeid]"))?diagramModel.getNode(element.getAttribute("data-nodeid")):null}getNodeFactories(){return this.nodeFactories}getLinkFactories(){return this.linkFactories}getLabelFactories(){return this.labelFactories}getPortFactories(){return this.portFactories}getFactoryForNode(node){return"string"==typeof node?this.nodeFactories.getFactory(node):this.nodeFactories.getFactory(node.getType())}getFactoryForLink(link){return"string"==typeof link?this.linkFactories.getFactory(link):this.linkFactories.getFactory(link.getType())}getFactoryForLabel(label){return"string"==typeof label?this.labelFactories.getFactory(label):this.labelFactories.getFactory(label.getType())}getFactoryForPort(port){return"string"==typeof port?this.portFactories.getFactory(port):this.portFactories.getFactory(port.getType())}generateWidgetForLink(link){return this.getFactoryForLink(link).generateReactWidget({model:link})}generateWidgetForNode(node){return this.getFactoryForNode(node).generateReactWidget({model:node})}getNodeElement(node){const selector=this.canvas.querySelector(`.node[data-nodeid="${node.getID()}"]`);if(null===selector)throw new Error("Cannot find Node element with nodeID: ["+node.getID()+"]");return selector}getNodePortElement(port){var selector=this.canvas.querySelector(`.port[data-name="${port.getName()}"][data-nodeid="${port.getParent().getID()}"]`);if(null===selector)throw new Error("Cannot find Node Port element with nodeID: ["+port.getParent().getID()+"] and name: ["+port.getName()+"]");return selector}getPortCenter(port){return this.getPortCoords(port).getOrigin()}getPortCoords(port,element){if(!this.canvas)throw new Error("Canvas needs to be set first");element||(element=this.getNodePortElement(port));const sourceRect=element.getBoundingClientRect(),point=this.getRelativeMousePoint({clientX:sourceRect.left,clientY:sourceRect.top}),zoom=this.model.getZoomLevel()/100;return new geometry_1.Rectangle(point.x,point.y,sourceRect.width/zoom,sourceRect.height/zoom)}getNodeDimensions(node){if(!this.canvas)return{width:0,height:0};const nodeRect=this.getNodeElement(node).getBoundingClientRect();return{width:nodeRect.width,height:nodeRect.height}}getBoundingNodesRect(nodes,margin){if(nodes){if(0===nodes.length)return new geometry_1.Rectangle(0,0,0,0);let boundingBox=geometry_1.Polygon.boundingBoxFromPolygons(nodes.map(node=>node.getBoundingBox()));return margin?new geometry_1.Rectangle(boundingBox.getTopLeft().x-margin,boundingBox.getTopLeft().y-margin,boundingBox.getWidth()+2*margin,boundingBox.getHeight()+2*margin):boundingBox}}zoomToFitNodes(margin){let nodesRect,selectedNodes=this.model.getSelectedEntities().filter(entity=>entity instanceof NodeModel_1.NodeModel).map(node=>node);if(0==selectedNodes.length){let allNodes=this.model.getSelectionEntities().filter(entity=>entity instanceof NodeModel_1.NodeModel).map(node=>node);nodesRect=this.getBoundingNodesRect(allNodes,margin)}else nodesRect=this.getBoundingNodesRect(selectedNodes,margin);if(nodesRect){let canvasRect=this.canvas.getBoundingClientRect(),canvasTopLeftPoint={x:canvasRect.left,y:canvasRect.top},nodeLayerTopLeftPoint={x:canvasTopLeftPoint.x+this.getModel().getOffsetX(),y:canvasTopLeftPoint.y+this.getModel().getOffsetY()};const xFactor=this.canvas.clientWidth/nodesRect.getWidth(),yFactor=this.canvas.clientHeight/nodesRect.getHeight(),zoomFactor=xFactor<yFactor?xFactor:yFactor;this.model.setZoomLevel(100*zoomFactor);let nodesRectTopLeftPoint={x:nodeLayerTopLeftPoint.x+nodesRect.getTopLeft().x*zoomFactor,y:nodeLayerTopLeftPoint.y+nodesRect.getTopLeft().y*zoomFactor};this.model.setOffset(this.model.getOffsetX()+canvasTopLeftPoint.x-nodesRectTopLeftPoint.x,this.model.getOffsetY()+canvasTopLeftPoint.y-nodesRectTopLeftPoint.y),this.repaintCanvas()}}getMaxNumberPointsPerLink(){return this.maxNumberPointsPerLink}setMaxNumberPointsPerLink(max){this.maxNumberPointsPerLink=max}}exports.DiagramEngine=DiagramEngine},794:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),DefaultLabelModel_1=__webpack_require__(250),DefaultLabelWidget_1=__webpack_require__(405),react_canvas_core_1=__webpack_require__(3);class DefaultLabelFactory extends react_canvas_core_1.AbstractReactFactory{constructor(){super("default")}generateReactWidget(event){return React.createElement(DefaultLabelWidget_1.DefaultLabelWidget,{model:event.model})}generateModel(event){return new DefaultLabelModel_1.DefaultLabelModel}}exports.DefaultLabelFactory=DefaultLabelFactory},795:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),DefaultLinkModel_1=__webpack_require__(251),DefaultLinkWidget_1=__webpack_require__(406),styled_1=__webpack_require__(18),core_1=__webpack_require__(40),react_canvas_core_1=__webpack_require__(3);var S;!function(S){S.Keyframes=core_1.keyframes`
		from {
			stroke-dashoffset: 24;
		}
		to {
			stroke-dashoffset: 0;
		}
	`;const selected=core_1.css`
		stroke-dasharray: 10, 2;
		animation: ${S.Keyframes} 1s linear infinite;
	`;S.Path=styled_1.default.path`
		${p=>p.selected&&selected};
		fill: none;
		pointer-events: all;
	`}(S||(S={}));class DefaultLinkFactory extends react_canvas_core_1.AbstractReactFactory{constructor(type="default"){super(type)}generateReactWidget(event){return React.createElement(DefaultLinkWidget_1.DefaultLinkWidget,{link:event.model,diagramEngine:this.engine})}generateModel(event){return new DefaultLinkModel_1.DefaultLinkModel}generateLinkSegment(model,selected,path){return React.createElement(S.Path,{selected:selected,stroke:selected?model.getOptions().selectedColor:model.getOptions().color,strokeWidth:model.getOptions().width,d:path})}}exports.DefaultLinkFactory=DefaultLinkFactory},796:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),DefaultNodeModel_1=__webpack_require__(409),DefaultNodeWidget_1=__webpack_require__(410),react_canvas_core_1=__webpack_require__(3);class DefaultNodeFactory extends react_canvas_core_1.AbstractReactFactory{constructor(){super("default")}generateReactWidget(event){return React.createElement(DefaultNodeWidget_1.DefaultNodeWidget,{engine:this.engine,node:event.model})}generateModel(event){return new DefaultNodeModel_1.DefaultNodeModel}}exports.DefaultNodeFactory=DefaultNodeFactory},797:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const DefaultPortModel_1=__webpack_require__(252),react_canvas_core_1=__webpack_require__(3);class DefaultPortFactory extends react_canvas_core_1.AbstractModelFactory{constructor(){super("default")}generateModel(){return new DefaultPortModel_1.DefaultPortModel({name:"unknown"})}}exports.DefaultPortFactory=DefaultPortFactory},816:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_core_1=__webpack_require__(32),dagre=__webpack_require__(817),_=__webpack_require__(5),geometry_1=__webpack_require__(55);exports.DagreEngine=class DagreEngine{constructor(options={}){this.options=options}redistribute(model){var g=new dagre.graphlib.Graph({multigraph:!0});g.setGraph(this.options.graph||{}),g.setDefaultEdgeLabel((function(){return{}}));const processedlinks={};_.forEach(model.getNodes(),node=>{g.setNode(node.getID(),{width:node.width,height:node.height})}),_.forEach(model.getLinks(),link=>{link.getSourcePort()&&link.getTargetPort()&&(processedlinks[link.getID()]=!0,g.setEdge({v:link.getSourcePort().getNode().getID(),w:link.getTargetPort().getNode().getID(),name:link.getID()}))}),dagre.layout(g),g.nodes().forEach(v=>{const node=g.node(v);model.getNode(v).setPosition(node.x-node.width/2,node.y-node.height/2)}),this.options.includeLinks&&g.edges().forEach(e=>{const edge=g.edge(e),link=model.getLink(e.name),points=[link.getFirstPoint()];for(let i=1;i<edge.points.length-2;i++)points.push(new react_diagrams_core_1.PointModel({link:link,position:new geometry_1.Point(edge.points[i].x,edge.points[i].y)}));link.setPoints(points.concat(link.getLastPoint()))})}}},929:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(6),React=__webpack_require__(0),react_canvas_core_1=__webpack_require__(3),DemoCanvasWidget_1=__webpack_require__(11);exports.default=()=>{var engine=react_diagrams_1.default();const state=engine.getStateMachine().getCurrentState();state instanceof react_diagrams_1.DefaultDiagramState&&(state.dragNewLink.config.allowLooseLinks=!1);var model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);var link1=port1.link(port2),node3=new react_diagrams_1.DefaultNodeModel("Node 3","rgb(0,192,255)");return node3.addOutPort("Out"),node3.setPosition(100,200),model.addAll(node1,node2,node3,link1),engine.setModel(model),React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine}))}},930:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(6),React=__webpack_require__(0),react_canvas_core_1=__webpack_require__(3),DemoCanvasWidget_1=__webpack_require__(11);function generateNodes(model,offsetX,offsetY){var node1=new react_diagrams_1.DefaultNodeModel("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100+offsetX,100+offsetY);var node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(200+offsetX,100+offsetY);var link1=port1.link(port2);model.addAll(node1,node2,link1)}exports.default=()=>{for(var engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel,i=0;i<8;i++)for(var j=0;j<8;j++)generateNodes(model,200*i,100*j);return engine.setModel(model),React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine}))}},931:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),react_diagrams_1=__webpack_require__(6),react_canvas_core_1=__webpack_require__(3),DemoCanvasWidget_1=__webpack_require__(11);exports.default=()=>{var engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);let link1=port1.link(port2);model.addAll(node1,node2,link1);var node3=new react_diagrams_1.DefaultNodeModel("Node 3","rgb(0,192,255)"),port3=node3.addOutPort("Out");node3.setPosition(100,250);var node4=new react_diagrams_1.DefaultNodeModel("Node 4","rgb(192,255,0)"),port4=node4.addInPort("In");node4.setPosition(400,250);var link2=port3.link(port4);return link2.point(350,225),link2.point(200,225),model.addAll(node3,node4,link2),engine.setModel(model),model.setLocked(!0),React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine}))}},932:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(6),React=__webpack_require__(0),react_canvas_core_1=__webpack_require__(3),DemoCanvasWidget_1=__webpack_require__(11);exports.default=()=>{var engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel;model.setGridSize(50);var node1=new react_diagrams_1.DefaultNodeModel("Node 1","rgb(0,192,255)");let port=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)");let port2=node2.addInPort("In");node2.setPosition(400,100);let link1=port.link(port2);return model.addAll(node1,node2,link1),engine.setModel(model),React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine}))}},933:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),addon_actions_1=__webpack_require__(127),react_diagrams_1=__webpack_require__(6),react_canvas_core_1=__webpack_require__(3),DemoCanvasWidget_1=__webpack_require__(11);exports.default=()=>{var engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel("Node 1","rgb(255,99,66)"),port1=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,40);var node3=new react_diagrams_1.DefaultNodeModel("Node 3","rgb(128,99,255)"),port3=node3.addInPort("In");node3.setPosition(300,160);let link1=port1.link(port2),link2=port1.link(port3);return model.addAll(node1,node2,node3,link1,link2).forEach(item=>{item.registerListener({eventDidFire:addon_actions_1.action("element eventDidFire")})}),model.registerListener({eventDidFire:addon_actions_1.action("model eventDidFire")}),engine.setModel(model),React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine}))}},946:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(6),React=__webpack_require__(0),DemoWorkspaceWidget_1=__webpack_require__(49),react_canvas_core_1=__webpack_require__(3),DemoCanvasWidget_1=__webpack_require__(11);function generateNodes(model,offsetX,offsetY){var node1=new react_diagrams_1.DefaultNodeModel("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100+offsetX,100+offsetY);var node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(200+offsetX,100+offsetY);var link1=port1.link(port2);model.addAll(node1,node2,link1)}exports.default=()=>{for(var engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel,i=0;i<8;i++)for(var j=0;j<8;j++)generateNodes(model,200*i,100*j);return engine.setModel(model),React.createElement(DemoWorkspaceWidget_1.DemoWorkspaceWidget,{buttons:React.createElement(DemoWorkspaceWidget_1.DemoButton,{onClick:()=>engine.zoomToFit()},"Zoom to fit")},React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine})))}},947:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(6),React=__webpack_require__(0),DemoWorkspaceWidget_1=__webpack_require__(49),react_canvas_core_1=__webpack_require__(3),DemoCanvasWidget_1=__webpack_require__(11);function generateNodes(model,offsetX,offsetY){var node1=new react_diagrams_1.DefaultNodeModel("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100+offsetX,100+offsetY);var node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(200+offsetX,100+offsetY);var link1=port1.link(port2);model.addAll(node1,node2,link1)}exports.default=()=>{for(var engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel,i=0;i<8;i++)for(var j=0;j<8;j++)generateNodes(model,200*i,100*j);return engine.setModel(model),React.createElement(DemoWorkspaceWidget_1.DemoWorkspaceWidget,{buttons:React.createElement(DemoWorkspaceWidget_1.DemoButton,{onClick:()=>engine.zoomToFitNodes(50)},"Zoom to fit")},React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine})))}},948:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(6),React=__webpack_require__(0),DemoWorkspaceWidget_1=__webpack_require__(49),addon_actions_1=__webpack_require__(127),react_canvas_core_1=__webpack_require__(3),DemoCanvasWidget_1=__webpack_require__(11);exports.default=()=>{const engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel("Node A","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100,100);const node2=new react_diagrams_1.DefaultNodeModel("Node B","rgb(255,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,50);const node3=new react_diagrams_1.DefaultNodeModel("Node C (no label)","rgb(192,255,255)"),port3=node3.addInPort("In");node3.setPosition(450,180);const node4=new react_diagrams_1.DefaultNodeModel("Node D","rgb(192,0,255)"),port4=node4.addInPort("In");node4.setPosition(300,250);const link1=port1.link(port2);link1.addLabel("Custom label 1"),link1.addLabel("Custom label 2");const link2=port1.link(port3),link3=port1.link(port4);return link3.addLabel("Emoji label: "),model.addAll(node1,node2,node3,node4,link1,link2,link3),engine.setModel(model),React.createElement(DemoWorkspaceWidget_1.DemoWorkspaceWidget,{buttons:React.createElement(DemoWorkspaceWidget_1.DemoButton,{onClick:()=>{addon_actions_1.action("Serialized Graph")(JSON.stringify(model.serializeDiagram(),null,2))}},"Serialize Graph")},React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine})))}},949:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(6),_=__webpack_require__(5),React=__webpack_require__(0),DemoWorkspaceWidget_1=__webpack_require__(49),react_canvas_core_1=__webpack_require__(3),DemoCanvasWidget_1=__webpack_require__(11);class CloneSelected extends React.Component{constructor(){super(...arguments),this.addPorts=()=>{const nodes=_.values(this.props.model.getNodes());for(let node of nodes)"Node 2"===node.getOptions().name?node.addInPort("in-"+(node.getInPorts().length+1),!1):node.addOutPort("out-"+(node.getOutPorts().length+1),!1);this.props.engine.repaintCanvas()}}render(){const{engine:engine}=this.props;return React.createElement(DemoWorkspaceWidget_1.DemoWorkspaceWidget,{buttons:React.createElement(DemoWorkspaceWidget_1.DemoButton,{onClick:this.addPorts},"Add more ports")},React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine})))}}exports.default=()=>{var engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel("Node 1","rgb(0,192,255)");node1.setPosition(100,100);var node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)");return node2.setPosition(400,100),model.addAll(node1,node2),engine.setModel(model),React.createElement(CloneSelected,{engine:engine,model:model})}},950:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),react_diagrams_1=__webpack_require__(6),react_canvas_core_1=__webpack_require__(3),DemoCanvasWidget_1=__webpack_require__(11),DefaultState_1=__webpack_require__(951);exports.default=()=>{const engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel("Node 1","rgb(0,192,255)");node1.addOutPort("Out"),node1.setPosition(100,100);const node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)");return node2.addInPort("In"),node2.setPosition(400,100),model.addAll(node1,node2),engine.setModel(model),engine.getStateMachine().pushState(new DefaultState_1.DefaultState),React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine}))}},951:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_canvas_core_1=__webpack_require__(3),react_diagrams_core_1=__webpack_require__(32),CreateLinkState_1=__webpack_require__(952);class DefaultState extends react_canvas_core_1.State{constructor(){super({name:"starting-state"}),this.childStates=[new react_canvas_core_1.SelectingState],this.dragCanvas=new react_canvas_core_1.DragCanvasState,this.createLink=new CreateLinkState_1.CreateLinkState,this.dragItems=new react_diagrams_core_1.DragDiagramItemsState,this.registerAction(new react_canvas_core_1.Action({type:react_canvas_core_1.InputType.MOUSE_DOWN,fire:event=>{const element=this.engine.getActionEventBus().getModelForEvent(event);if(element){if(element instanceof react_diagrams_core_1.PortModel)return;this.transitionWithEvent(this.dragItems,event)}else this.transitionWithEvent(this.dragCanvas,event)}})),this.registerAction(new react_canvas_core_1.Action({type:react_canvas_core_1.InputType.MOUSE_UP,fire:event=>{this.engine.getActionEventBus().getModelForEvent(event)instanceof react_diagrams_core_1.PortModel&&this.transitionWithEvent(this.createLink,event)}}))}}exports.DefaultState=DefaultState},952:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_canvas_core_1=__webpack_require__(3),react_diagrams_core_1=__webpack_require__(32);class CreateLinkState extends react_canvas_core_1.State{constructor(){super({name:"create-new-link"}),this.registerAction(new react_canvas_core_1.Action({type:react_canvas_core_1.InputType.MOUSE_UP,fire:actionEvent=>{const element=this.engine.getActionEventBus().getModelForEvent(actionEvent),{event:{clientX:clientX,clientY:clientY}}=actionEvent,ox=this.engine.getModel().getOffsetX(),oy=this.engine.getModel().getOffsetY();if(element instanceof react_diagrams_core_1.PortModel&&!this.sourcePort){this.sourcePort=element;const link=this.sourcePort.createLinkModel();link.setSourcePort(this.sourcePort),link.getFirstPoint().setPosition(clientX-ox,clientY-oy),link.getLastPoint().setPosition(clientX-ox+20,clientY-oy+20),this.link=this.engine.getModel().addLink(link)}else element instanceof react_diagrams_core_1.PortModel&&this.sourcePort&&element!=this.sourcePort?this.sourcePort.canLinkToPort(element)&&(this.link.setTargetPort(element),element.reportPosition(),this.clearState(),this.eject()):element===this.link.getLastPoint()&&this.link.point(clientX-ox,clientY-oy,-1);this.engine.repaintCanvas()}})),this.registerAction(new react_canvas_core_1.Action({type:react_canvas_core_1.InputType.MOUSE_MOVE,fire:actionEvent=>{if(!this.link)return;const{event:event}=actionEvent;this.link.getLastPoint().setPosition(event.clientX,event.clientY),this.engine.repaintCanvas()}})),this.registerAction(new react_canvas_core_1.Action({type:react_canvas_core_1.InputType.KEY_UP,fire:actionEvent=>{27===actionEvent.event.keyCode&&(this.link.remove(),this.clearState(),this.eject(),this.engine.repaintCanvas())}}))}clearState(){this.link=void 0,this.sourcePort=void 0}}exports.CreateLinkState=CreateLinkState},953:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),react_diagrams_1=__webpack_require__(6),react_canvas_core_1=__webpack_require__(3),DemoCanvasWidget_1=__webpack_require__(11);exports.default=()=>{const engine=react_diagrams_1.default({registerDefaultDeleteItemsAction:!1}),model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel({name:"Node 1",color:"rgb(0,192,255)"});node1.setPosition(100,100);const port1=node1.addOutPort("Out"),node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);const link1=port1.link(port2);return link1.getOptions().testName="Test",link1.addLabel("Hello World!"),model.addAll(node1,node2,link1),engine.setModel(model),engine.getActionEventBus().registerAction(new react_canvas_core_1.DeleteItemsAction({keyCodes:[46]})),React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine}))}},954:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),_=__webpack_require__(5),react_diagrams_1=__webpack_require__(6),react_canvas_core_1=__webpack_require__(3),DemoCanvasWidget_1=__webpack_require__(11);class CustomDeleteItemsAction extends react_canvas_core_1.Action{constructor(options={}){options=Object.assign({keyCodes:[46,8]},options),super({type:react_canvas_core_1.InputType.KEY_DOWN,fire:event=>{if(-1!==options.keyCodes.indexOf(event.event.keyCode)){const selectedEntities=this.engine.getModel().getSelectedEntities();if(selectedEntities.length>0){window.confirm("Are you sure you want to delete?")&&(_.forEach(selectedEntities,model=>{model.isLocked()||model.remove()}),this.engine.repaintCanvas())}}}})}}exports.default=()=>{const engine=react_diagrams_1.default({registerDefaultDeleteItemsAction:!1}),model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel({name:"Node 1",color:"rgb(0,192,255)"});node1.setPosition(100,100);const port1=node1.addOutPort("Out"),node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);const link1=port1.link(port2);return link1.getOptions().testName="Test",link1.addLabel("Hello World!"),model.addAll(node1,node2,link1),engine.setModel(model),engine.getActionEventBus().registerAction(new CustomDeleteItemsAction),React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine}))}},955:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(6),_=__webpack_require__(5),React=__webpack_require__(0),DemoWorkspaceWidget_1=__webpack_require__(49),react_canvas_core_1=__webpack_require__(3),DemoCanvasWidget_1=__webpack_require__(11);class CloneSelected extends React.Component{constructor(props){super(props),this.cloneSelected=this.cloneSelected.bind(this)}cloneSelected(){let{engine:engine}=this.props,offset_x=100,offset_y=100,model=engine.getModel(),itemMap={};_.forEach(model.getSelectedEntities(),item=>{let newItem=item.clone(itemMap);newItem instanceof react_diagrams_1.NodeModel?(newItem.setPosition(newItem.getX()+offset_x,newItem.getY()+offset_y),model.addNode(newItem)):newItem instanceof react_diagrams_1.LinkModel&&(newItem.getPoints().forEach(p=>{p.setPosition(p.getX()+offset_x,p.getY()+offset_y)}),model.addLink(newItem)),newItem.setSelected(!1)}),this.forceUpdate()}render(){const{engine:engine}=this.props;return React.createElement(DemoWorkspaceWidget_1.DemoWorkspaceWidget,{buttons:React.createElement(DemoWorkspaceWidget_1.DemoButton,{onClick:this.cloneSelected},"Clone Selected")},React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine})))}}exports.default=()=>{var engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel("Node 1","rgb(0,192,255)");let port=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)");let port2=node2.addInPort("In");node2.setPosition(400,100);let link1=port.link(port2);return model.addAll(node1,node2,link1),engine.setModel(model),React.createElement(CloneSelected,{engine:engine,model:model})}},956:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(6),React=__webpack_require__(0),DemoWorkspaceWidget_1=__webpack_require__(49),addon_actions_1=__webpack_require__(127),beautify=__webpack_require__(957),react_canvas_core_1=__webpack_require__(3),DemoCanvasWidget_1=__webpack_require__(11);exports.default=()=>{var engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);var link1=port1.link(port2);model.addAll(node1,node2,link1),engine.setModel(model);var str=JSON.stringify(model.serialize()),model2=new react_diagrams_1.DiagramModel;return model2.deserializeModel(JSON.parse(str),engine),engine.setModel(model2),React.createElement(DemoWorkspaceWidget_1.DemoWorkspaceWidget,{buttons:React.createElement(DemoWorkspaceWidget_1.DemoButton,{onClick:()=>{addon_actions_1.action("Serialized Graph")(beautify(model2.serialize(),null,2,80))}},"Serialize Graph")},React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine})))}},958:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(6),React=__webpack_require__(0),_=__webpack_require__(5),DemoWorkspaceWidget_1=__webpack_require__(49),react_canvas_core_1=__webpack_require__(3),DemoCanvasWidget_1=__webpack_require__(11);class NodeDelayedPosition extends React.Component{constructor(props){super(props),this.updatePosition=this.updatePosition.bind(this),this.updatePositionViaSerialize=this.updatePositionViaSerialize.bind(this)}updatePosition(){const{engine:engine}=this.props;const nodes=engine.getModel().getNodes();let node=nodes[Object.keys(nodes)[0]];node.setPosition(node.getX()+30,node.getY()+30),engine.repaintCanvas()}updatePositionViaSerialize(){let{engine:engine}=this.props,model=engine.getModel(),str=JSON.stringify(model.serialize()),model2=new react_diagrams_1.DiagramModel,obj=JSON.parse(str),node=_.values(obj.layers[1].models)[0];node.x+=30,node.y+=30,model2.deserializeModel(obj,engine),engine.setModel(model2)}render(){const{engine:engine}=this.props;return React.createElement(DemoWorkspaceWidget_1.DemoWorkspaceWidget,{buttons:[React.createElement(DemoWorkspaceWidget_1.DemoButton,{key:1,onClick:this.updatePosition},"Update position"),React.createElement(DemoWorkspaceWidget_1.DemoButton,{key:2,onClick:this.updatePositionViaSerialize},"Update position via serialize")]},React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine})))}}exports.default=()=>{var engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);var link1=port1.link(port2);return model.addAll(node1,node2,link1),engine.setModel(model),React.createElement(NodeDelayedPosition,{engine:engine,model:model})}},959:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),BodyWidget_1=__webpack_require__(960),Application_1=__webpack_require__(963);exports.default=()=>{var app=new Application_1.Application;return React.createElement(BodyWidget_1.BodyWidget,{app:app})}},960:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),_=__webpack_require__(5),TrayWidget_1=__webpack_require__(961),TrayItemWidget_1=__webpack_require__(962),react_diagrams_1=__webpack_require__(6),react_canvas_core_1=__webpack_require__(3),DemoCanvasWidget_1=__webpack_require__(11),styled_1=__webpack_require__(18);var S;!function(S){S.Body=styled_1.default.div`
		flex-grow: 1;
		display: flex;
		flex-direction: column;
		min-height: 100%;
	`,S.Header=styled_1.default.div`
		display: flex;
		background: rgb(30, 30, 30);
		flex-grow: 0;
		flex-shrink: 0;
		color: white;
		font-family: Helvetica, Arial, sans-serif;
		padding: 10px;
		align-items: center;
	`,S.Content=styled_1.default.div`
		display: flex;
		flex-grow: 1;
	`,S.Layer=styled_1.default.div`
		position: relative;
		flex-grow: 1;
	`}(S||(S={}));class BodyWidget extends React.Component{render(){return React.createElement(S.Body,null,React.createElement(S.Header,null,React.createElement("div",{className:"title"},"Storm React Diagrams - DnD demo")),React.createElement(S.Content,null,React.createElement(TrayWidget_1.TrayWidget,null,React.createElement(TrayItemWidget_1.TrayItemWidget,{model:{type:"in"},name:"In Node",color:"rgb(192,255,0)"}),React.createElement(TrayItemWidget_1.TrayItemWidget,{model:{type:"out"},name:"Out Node",color:"rgb(0,192,255)"})),React.createElement(S.Layer,{onDrop:event=>{var data=JSON.parse(event.dataTransfer.getData("storm-diagram-node")),nodesCount=_.keys(this.props.app.getDiagramEngine().getModel().getNodes()).length,node=null;"in"===data.type?(node=new react_diagrams_1.DefaultNodeModel("Node "+(nodesCount+1),"rgb(192,255,0)")).addInPort("In"):(node=new react_diagrams_1.DefaultNodeModel("Node "+(nodesCount+1),"rgb(0,192,255)")).addOutPort("Out");var point=this.props.app.getDiagramEngine().getRelativeMousePoint(event);node.setPosition(point),this.props.app.getDiagramEngine().getModel().addNode(node),this.forceUpdate()},onDragOver:event=>{event.preventDefault()}},React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:this.props.app.getDiagramEngine()})))))}}exports.BodyWidget=BodyWidget},961:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),styled_1=__webpack_require__(18);var S;!function(S){S.Tray=styled_1.default.div`
		min-width: 200px;
		background: rgb(20, 20, 20);
		flex-grow: 0;
		flex-shrink: 0;
	`}(S||(S={}));class TrayWidget extends React.Component{render(){return React.createElement(S.Tray,null,this.props.children)}}exports.TrayWidget=TrayWidget},962:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),styled_1=__webpack_require__(18);var S;!function(S){S.Tray=styled_1.default.div`
		color: white;
		font-family: Helvetica, Arial;
		padding: 5px;
		margin: 0px 10px;
		border: solid 1px ${p=>p.color};
		border-radius: 5px;
		margin-bottom: 2px;
		cursor: pointer;
	`}(S||(S={}));class TrayItemWidget extends React.Component{render(){return React.createElement(S.Tray,{color:this.props.color,draggable:!0,onDragStart:event=>{event.dataTransfer.setData("storm-diagram-node",JSON.stringify(this.props.model))},className:"tray-item"},this.props.name)}}exports.TrayItemWidget=TrayItemWidget},963:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const SRD=__webpack_require__(6);exports.Application=class Application{constructor(){this.diagramEngine=SRD.default(),this.newModel()}newModel(){this.activeModel=new SRD.DiagramModel,this.diagramEngine.setModel(this.activeModel);var node1=new SRD.DefaultNodeModel("Node 1","rgb(0,192,255)");let port=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new SRD.DefaultNodeModel("Node 2","rgb(192,255,0)");let port2=node2.addInPort("In");node2.setPosition(400,100);let link1=port.link(port2);this.activeModel.addAll(node1,node2,link1)}getActiveDiagram(){return this.activeModel}getDiagramEngine(){return this.diagramEngine}}},964:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(6),React=__webpack_require__(0),DemoWorkspaceWidget_1=__webpack_require__(49),addon_actions_1=__webpack_require__(127),react_canvas_core_1=__webpack_require__(3),DemoCanvasWidget_1=__webpack_require__(11);exports.default=()=>{const engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel("Node A","rgb(0,192,255)"),port1=node1.addPort(new react_diagrams_1.DefaultPortModel(!1,"out-1","Out"));node1.setPosition(340,350);const node2=new react_diagrams_1.DefaultNodeModel("Node B","rgb(255,255,0)"),port2=node2.addPort(new react_diagrams_1.DefaultPortModel(!1,"out-1","Out"));node2.setPosition(240,80);const node3=new react_diagrams_1.DefaultNodeModel("Node C","rgb(192,255,255)"),port3=node3.addPort(new react_diagrams_1.DefaultPortModel(!0,"in-1","In"));node3.setPosition(540,180);const node4=new react_diagrams_1.DefaultNodeModel("Node D","rgb(192,0,255)"),port4=node4.addPort(new react_diagrams_1.DefaultPortModel(!0,"in-1","In"));node4.setPosition(95,185);const node5=new react_diagrams_1.DefaultNodeModel("Node E","rgb(192,255,0)");node5.setPosition(250,180);const pathfinding=engine.getLinkFactories().getFactory(react_diagrams_1.PathFindingLinkFactory.NAME),link1=port1.link(port4,pathfinding),link2=port2.link(port3,pathfinding);return link1.addLabel(new react_diagrams_1.DefaultLabelModel({label:"I am a label!",offsetY:20})),model.addAll(node1,node2,node3,node4,node5,link1,link2),engine.setModel(model),React.createElement(DemoWorkspaceWidget_1.DemoWorkspaceWidget,{buttons:React.createElement(DemoWorkspaceWidget_1.DemoButton,{onClick:()=>{addon_actions_1.action("Serialized Graph")(JSON.stringify(model.serialize(),null,2))}},"Serialize Graph")},React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine})))}},965:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(6),React=__webpack_require__(0),DemoWorkspaceWidget_1=__webpack_require__(49),addon_actions_1=__webpack_require__(127),react_canvas_core_1=__webpack_require__(3),DemoCanvasWidget_1=__webpack_require__(11);class RightAnglePortModel extends react_diagrams_1.DefaultPortModel{createLinkModel(factory){return new react_diagrams_1.RightAngleLinkModel}}exports.RightAnglePortModel=RightAnglePortModel,exports.default=()=>{const engine=react_diagrams_1.default();engine.getLinkFactories().registerFactory(new react_diagrams_1.RightAngleLinkFactory);const model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel("Node A","rgb(0,192,255)"),port1=node1.addPort(new RightAnglePortModel(!1,"out-1","Out"));node1.setPosition(340,350);const node2=new react_diagrams_1.DefaultNodeModel("Node B","rgb(255,255,0)"),port2=node2.addPort(new RightAnglePortModel(!1,"out-1","Out"));node2.setPosition(240,80);const node3=new react_diagrams_1.DefaultNodeModel("Node C","rgb(192,255,255)"),port3=node3.addPort(new RightAnglePortModel(!0,"in-1","In"));node3.setPosition(540,180);const node4=new react_diagrams_1.DefaultNodeModel("Node D","rgb(192,0,255)"),port4=node4.addPort(new RightAnglePortModel(!0,"in-1","In"));node4.setPosition(95,185);const link1=port1.link(port4),link2=port2.link(port3);return model.addAll(node1,node2,node3,node4,link1,link2),engine.setModel(model),React.createElement(DemoWorkspaceWidget_1.DemoWorkspaceWidget,{buttons:React.createElement(DemoWorkspaceWidget_1.DemoButton,{onClick:()=>{addon_actions_1.action("Serialized Graph")(JSON.stringify(model.serialize(),null,2))}},"Serialize Graph")},React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine})))}},966:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(6),React=__webpack_require__(0),DiamondNodeModel_1=__webpack_require__(449),DiamondNodeFactory_1=__webpack_require__(967),SimplePortFactory_1=__webpack_require__(969),DiamondPortModel_1=__webpack_require__(450),react_canvas_core_1=__webpack_require__(3),DemoCanvasWidget_1=__webpack_require__(11);exports.default=()=>{var engine=react_diagrams_1.default();engine.getPortFactories().registerFactory(new SimplePortFactory_1.SimplePortFactory("diamond",config=>new DiamondPortModel_1.DiamondPortModel(react_diagrams_1.PortModelAlignment.LEFT))),engine.getNodeFactories().registerFactory(new DiamondNodeFactory_1.DiamondNodeFactory);var model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100,200);var node2=new DiamondNodeModel_1.DiamondNodeModel;node2.setPosition(250,108);var node3=new react_diagrams_1.DefaultNodeModel("Node 3","red"),port3=node3.addInPort("In");node3.setPosition(500,100);var link1=port1.link(node2.getPort(react_diagrams_1.PortModelAlignment.LEFT)),link2=port3.link(node2.getPort(react_diagrams_1.PortModelAlignment.RIGHT)),node4=new react_diagrams_1.DefaultNodeModel("Node 4","rgb(0,192,255)"),port4=node4.addOutPort("Out");node4.setPosition(200,10);var link3=port4.link(node2.getPort(react_diagrams_1.PortModelAlignment.TOP)),node5=new react_diagrams_1.DefaultNodeModel("Node 5","mediumpurple"),port5=node5.addInPort("In");node5.setPosition(400,300);var link4=port5.link(node2.getPort(react_diagrams_1.PortModelAlignment.BOTTOM));return model.addAll(node1,node2,node3,link1,link2,node4,link3,link4,node5),engine.setModel(model),React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine}))}},967:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const DiamondNodeWidget_1=__webpack_require__(968),DiamondNodeModel_1=__webpack_require__(449),React=__webpack_require__(0),react_canvas_core_1=__webpack_require__(3);class DiamondNodeFactory extends react_canvas_core_1.AbstractReactFactory{constructor(){super("diamond")}generateReactWidget(event){return React.createElement(DiamondNodeWidget_1.DiamondNodeWidget,{engine:this.engine,size:50,node:event.model})}generateModel(event){return new DiamondNodeModel_1.DiamondNodeModel}}exports.DiamondNodeFactory=DiamondNodeFactory},968:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),react_diagrams_1=__webpack_require__(6),styled_1=__webpack_require__(18);var S;!function(S){S.Port=styled_1.default.div`
		width: 16px;
		height: 16px;
		z-index: 10;
		background: rgba(0, 0, 0, 0.5);
		border-radius: 8px;
		cursor: pointer;

		&:hover {
			background: rgba(0, 0, 0, 1);
		}
	`}(S||(S={}));class DiamondNodeWidget extends React.Component{render(){return React.createElement("div",{className:"diamond-node",style:{position:"relative",width:this.props.size,height:this.props.size}},React.createElement("svg",{width:this.props.size,height:this.props.size,dangerouslySetInnerHTML:{__html:`\n          <g id="Layer_1">\n          </g>\n          <g id="Layer_2">\n            <polygon fill="mediumpurple" stroke="${this.props.node.isSelected()?"white":"#000000"}" stroke-width="3" stroke-miterlimit="10" points="10,`+this.props.size/2+" "+this.props.size/2+",10 "+(this.props.size-10)+","+this.props.size/2+" "+this.props.size/2+","+(this.props.size-10)+' "/>\n          </g>\n        '}}),React.createElement(react_diagrams_1.PortWidget,{style:{top:this.props.size/2-8,left:-8,position:"absolute"},port:this.props.node.getPort(react_diagrams_1.PortModelAlignment.LEFT),engine:this.props.engine},React.createElement(S.Port,null)),React.createElement(react_diagrams_1.PortWidget,{style:{left:this.props.size/2-8,top:-8,position:"absolute"},port:this.props.node.getPort(react_diagrams_1.PortModelAlignment.TOP),engine:this.props.engine},React.createElement(S.Port,null)),React.createElement(react_diagrams_1.PortWidget,{style:{left:this.props.size-8,top:this.props.size/2-8,position:"absolute"},port:this.props.node.getPort(react_diagrams_1.PortModelAlignment.RIGHT),engine:this.props.engine},React.createElement(S.Port,null)),React.createElement(react_diagrams_1.PortWidget,{style:{left:this.props.size/2-8,top:this.props.size-8,position:"absolute"},port:this.props.node.getPort(react_diagrams_1.PortModelAlignment.BOTTOM),engine:this.props.engine},React.createElement(S.Port,null)))}}exports.DiamondNodeWidget=DiamondNodeWidget},969:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_canvas_core_1=__webpack_require__(3);class SimplePortFactory extends react_canvas_core_1.AbstractModelFactory{constructor(type,cb){super(type),this.cb=cb}generateModel(event){return this.cb(event.initialConfig)}}exports.SimplePortFactory=SimplePortFactory},970:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(6),React=__webpack_require__(0),react_canvas_core_1=__webpack_require__(3),DemoCanvasWidget_1=__webpack_require__(11);class AdvancedLinkModel extends react_diagrams_1.DefaultLinkModel{constructor(){super({type:"advanced",width:10})}}exports.AdvancedLinkModel=AdvancedLinkModel;class AdvancedPortModel extends react_diagrams_1.DefaultPortModel{createLinkModel(){return new AdvancedLinkModel}}exports.AdvancedPortModel=AdvancedPortModel;class AdvancedLinkSegment extends React.Component{constructor(props){super(props),this.percent=0}componentDidMount(){this.mounted=!0,this.callback=()=>{if(!this.circle||!this.path)return;this.percent+=2,this.percent>100&&(this.percent=0);let point=this.path.getPointAtLength(this.path.getTotalLength()*(this.percent/100));this.circle.setAttribute("cx",""+point.x),this.circle.setAttribute("cy",""+point.y),this.mounted&&requestAnimationFrame(this.callback)},requestAnimationFrame(this.callback)}componentWillUnmount(){this.mounted=!1}render(){return React.createElement(React.Fragment,null,React.createElement("path",{fill:"none",ref:ref=>{this.path=ref},strokeWidth:this.props.model.getOptions().width,stroke:"rgba(255,0,0,0.5)",d:this.props.path}),React.createElement("circle",{ref:ref=>{this.circle=ref},r:10,fill:"orange"}))}}exports.AdvancedLinkSegment=AdvancedLinkSegment;class AdvancedLinkFactory extends react_diagrams_1.DefaultLinkFactory{constructor(){super("advanced")}generateModel(){return new AdvancedLinkModel}generateLinkSegment(model,selected,path){return React.createElement("g",null,React.createElement(AdvancedLinkSegment,{model:model,path:path}))}}exports.AdvancedLinkFactory=AdvancedLinkFactory,exports.default=()=>{var engine=react_diagrams_1.default();engine.getLinkFactories().registerFactory(new AdvancedLinkFactory);var node1=new react_diagrams_1.DefaultNodeModel("Source","rgb(0,192,255)");let port1=node1.addPort(new AdvancedPortModel(!1,"out-1","Out thick")),port2=node1.addPort(new react_diagrams_1.DefaultPortModel(!1,"out-2","Out default"));node1.setPosition(100,100);var node2=new react_diagrams_1.DefaultNodeModel("Target","rgb(192,255,0)"),port3=node2.addPort(new AdvancedPortModel(!0,"in-1","In thick")),port4=node2.addPort(new react_diagrams_1.DefaultPortModel(!0,"in-2","In default"));node2.setPosition(300,100);var node3=new react_diagrams_1.DefaultNodeModel("Source","rgb(0,192,255)");node3.addPort(new AdvancedPortModel(!1,"out-1","Out thick")),node3.addPort(new react_diagrams_1.DefaultPortModel(!1,"out-2","Out default")),node3.setPosition(100,200);var node4=new react_diagrams_1.DefaultNodeModel("Target","rgb(192,255,0)");node4.addPort(new AdvancedPortModel(!0,"in-1","In thick")),node4.addPort(new react_diagrams_1.DefaultPortModel(!0,"in-2","In default")),node4.setPosition(300,200);var model=new react_diagrams_1.DiagramModel;return model.addAll(port1.link(port3),port2.link(port4)),model.addAll(node1,node2,node3,node4),engine.setModel(model),React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine}))}},971:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(6),react_diagrams_core_1=__webpack_require__(32),React=__webpack_require__(0),react_canvas_core_1=__webpack_require__(3),DemoCanvasWidget_1=__webpack_require__(11);class AdvancedLinkModel extends react_diagrams_1.DefaultLinkModel{constructor(){super({type:"advanced",width:4})}}exports.AdvancedLinkModel=AdvancedLinkModel;class AdvancedPortModel extends react_diagrams_1.DefaultPortModel{createLinkModel(){return new AdvancedLinkModel}}exports.AdvancedPortModel=AdvancedPortModel;const CustomLinkArrowWidget=props=>{const{point:point,previousPoint:previousPoint}=props,angle=90+180*Math.atan2(point.getPosition().y-previousPoint.getPosition().y,point.getPosition().x-previousPoint.getPosition().x)/Math.PI;return React.createElement("g",{className:"arrow",transform:"translate("+point.getPosition().x+", "+point.getPosition().y+")"},React.createElement("g",{style:{transform:"rotate("+angle+"deg)"}},React.createElement("g",{transform:"translate(0, -3)"},React.createElement("polygon",{points:"0,10 8,30 -8,30",fill:props.color,onMouseLeave:()=>{this.setState({selected:!1})},onMouseEnter:()=>{this.setState({selected:!0})},"data-id":point.getID(),"data-linkid":point.getLink().getID()}))))};class AdvancedLinkWidget extends react_diagrams_1.DefaultLinkWidget{generateArrow(point,previousPoint){return React.createElement(CustomLinkArrowWidget,{key:point.getID(),point:point,previousPoint:previousPoint,colorSelected:this.props.link.getOptions().selectedColor,color:this.props.link.getOptions().color})}render(){var points=this.props.link.getPoints(),paths=[];this.refPaths=[];for(let j=0;j<points.length-1;j++)paths.push(this.generateLink(react_diagrams_core_1.LinkWidget.generateLinePath(points[j],points[j+1]),{"data-linkid":this.props.link.getID(),"data-point":j,onMouseDown:event=>{this.addPointToLink(event,j+1)}},j));for(let i=1;i<points.length-1;i++)paths.push(this.generatePoint(points[i]));return null!==this.props.link.getTargetPort()?paths.push(this.generateArrow(points[points.length-1],points[points.length-2])):paths.push(this.generatePoint(points[points.length-1])),React.createElement("g",{"data-default-link-test":this.props.link.getOptions().testName},paths)}}exports.AdvancedLinkWidget=AdvancedLinkWidget;class AdvancedLinkFactory extends react_diagrams_1.DefaultLinkFactory{constructor(){super("advanced")}generateModel(){return new AdvancedLinkModel}generateReactWidget(event){return React.createElement(AdvancedLinkWidget,{link:event.model,diagramEngine:this.engine})}}exports.AdvancedLinkFactory=AdvancedLinkFactory,exports.default=()=>{var engine=react_diagrams_1.default();engine.getLinkFactories().registerFactory(new AdvancedLinkFactory);var node1=new react_diagrams_1.DefaultNodeModel("Source","rgb(0,192,255)");let port1=node1.addPort(new AdvancedPortModel(!1,"out"));node1.setPosition(100,100);var node2=new react_diagrams_1.DefaultNodeModel("Target","rgb(192,255,0)"),port2=node2.addPort(new AdvancedPortModel(!0,"in"));node2.setPosition(500,350);var node3=new react_diagrams_1.DefaultNodeModel("Source","rgb(0,192,255)");let port3=node3.addPort(new AdvancedPortModel(!1,"out"));node3.setPosition(100,500);var node4=new react_diagrams_1.DefaultNodeModel("Target","rgb(192,255,0)"),port4=node4.addPort(new AdvancedPortModel(!0,"in"));node4.setPosition(500,450);var model=new react_diagrams_1.DiagramModel;return model.addAll(port1.link(port2),port3.link(port4)),model.addAll(node1,node2,node3,node4),engine.setModel(model),React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine}))}},972:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(6),React=__webpack_require__(0),DemoWorkspaceWidget_1=__webpack_require__(49),react_canvas_core_1=__webpack_require__(3),DemoCanvasWidget_1=__webpack_require__(11);function createNode(name){return new react_diagrams_1.DefaultNodeModel(name,"rgb(0,192,255)")}let count=0;function connectNodes(nodeFrom,nodeTo,engine){count++;const portOut=nodeFrom.addPort(new react_diagrams_1.DefaultPortModel(!0,`${nodeFrom.name}-out-${count}`,"Out")),portTo=nodeTo.addPort(new react_diagrams_1.DefaultPortModel(!1,`${nodeFrom.name}-to-${count}`,"IN"));return portOut.link(portTo)}class DemoWidget extends React.Component{constructor(props){super(props),this.autoDistribute=()=>{this.engine.redistribute(this.props.model),this.reroute(),this.props.engine.repaintCanvas()},this.engine=new react_diagrams_1.DagreEngine({graph:{rankdir:"RL",ranker:"longest-path",marginx:25,marginy:25},includeLinks:!0})}componentDidMount(){setTimeout(()=>{this.autoDistribute()},500)}reroute(){this.props.engine.getLinkFactories().getFactory(react_diagrams_1.PathFindingLinkFactory.NAME).calculateRoutingMatrix()}render(){return React.createElement(DemoWorkspaceWidget_1.DemoWorkspaceWidget,{buttons:React.createElement(DemoWorkspaceWidget_1.DemoButton,{onClick:this.autoDistribute},"Re-distribute")},React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:this.props.engine})))}}exports.default=()=>{let engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel,nodesFrom=[],nodesTo=[];nodesFrom.push(createNode("from-1")),nodesFrom.push(createNode("from-2")),nodesFrom.push(createNode("from-3")),nodesTo.push(createNode("to-1")),nodesTo.push(createNode("to-2")),nodesTo.push(createNode("to-3"));let links=nodesFrom.map((node,index)=>connectNodes(node,nodesTo[index]));return links.push(connectNodes(nodesFrom[0],nodesTo[1])),links.push(connectNodes(nodesTo[0],nodesFrom[1])),links.push(connectNodes(nodesFrom[1],nodesTo[2])),nodesFrom.forEach((node,index)=>{node.setPosition(70*index,70*index),model.addNode(node)}),nodesTo.forEach((node,index)=>{node.setPosition(70*index,100),model.addNode(node)}),links.forEach(link=>{model.addLink(link)}),engine.setModel(model),React.createElement(DemoWidget,{model:model,engine:engine})}},973:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(6),React=__webpack_require__(0),gsap_1=__webpack_require__(975),DemoWorkspaceWidget_1=__webpack_require__(49),react_canvas_core_1=__webpack_require__(3),DemoCanvasWidget_1=__webpack_require__(11);class NodeDelayedPosition extends React.Component{constructor(props){super(props)}render(){const{engine:engine}=this.props;return React.createElement(DemoWorkspaceWidget_1.DemoWorkspaceWidget,null,React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine})))}}exports.default=()=>{var engine=react_diagrams_1.default({repaintDebounceMs:12}),model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);var node3=new react_diagrams_1.DefaultNodeModel("Node 3","rgb(192,255,0)");node2.setPosition(200,300);var node4=new react_diagrams_1.DefaultNodeModel("Node 4","rgb(192,255,0)");node2.setPosition(400,400);var link1=port1.link(port2);model.addAll(node1,node2,link1,node3,node4),engine.setModel(model);setInterval(()=>{[node1,node2,node3,node4].map(node=>{var obj={x:0,y:0};gsap_1.default.fromTo(obj,{x:node.getPosition().x,y:node.getPosition().y},{x:Math.floor(500*Math.random()),y:Math.floor(500*Math.random()),duration:.8,onUpdate:()=>{node.setPosition(obj.x,obj.y),engine.repaintCanvas()}})})},2e3);return React.createElement(NodeDelayedPosition,{engine:engine,model:model})}}},[[458,1,2]]]);
//# sourceMappingURL=main.124b334272f5e0e56732.bundle.js.map